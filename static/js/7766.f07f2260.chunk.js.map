{"version":3,"file":"static/js/7766.f07f2260.chunk.js","mappings":"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","sources":["components/ChatHistory/index.js","webpack://@kne-components/leapin-ai-agent/./src/components/PageHeader/style.module.scss?df1b","components/PageHeader/index.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/jsx-runtime.js","webpack://@kne-components/leapin-ai-agent/./src/components/ChatHistory/style.module.scss?65f2"],"sourcesContent":["import { createWithRemoteLoader } from '@kne/remote-loader';\nimport { useState } from 'react';\nimport { Flex, Pagination, Button, Space } from 'antd';\nimport PageHeader from '@components/PageHeader';\nimport Fetch from '@kne/react-fetch';\nimport get from 'lodash/get';\nimport { useSearchParams, Link } from 'react-router-dom';\nimport { MessageList } from '@components/ChatBot';\nimport style from './style.module.scss';\n\nconst ChartHistory = createWithRemoteLoader({\n  modules: ['components-core:InfoPage@TableView', 'components-core:Global@usePreset', 'components-core:Common@SearchInput', 'components-core:Modal@useModal', 'components-core:StateTag']\n})(({ remoteModules, baseUrl }) => {\n  const [TableView, usePreset, SearchInput, useModal, StateTag] = remoteModules;\n  const { apis } = usePreset();\n  const [keyword, setKeyword] = useState('');\n  const [searchParams, setSearchParams] = useSearchParams();\n  const modal = useModal();\n  const page = searchParams.get('page') || 1,\n    pageSize = 10;\n  return (\n    <Flex className={style['history']} vertical gap={24}>\n      <PageHeader title=\"The Chat History\" description=\"The chat history recoird the running status of the application, including user inputs and AI replies.\" />\n      <Flex className={style['filter']} justify=\"space-between\">\n        <div></div>\n        <div>\n          <SearchInput className={style['search-input']} value={keyword} placeholder=\"search\" onSearch={setKeyword} />\n        </div>\n      </Flex>\n      <Fetch\n        {...Object.assign({}, apis.agent.getSessionList, {\n          params: { page, page_size: pageSize, keyword }\n        })}\n        render={({ data }) => {\n          return (\n            <Flex vertical gap={8}>\n              <TableView\n                dataSource={data.results}\n                columns={[\n                  {\n                    name: 'name',\n                    title: 'Name',\n                    getValueOf: item => {\n                      const info = get(item, 'agent_application.application') || get(item, 'agent_application.employee');\n\n                      return info?.name;\n                    }\n                  },\n                  {\n                    name: 'phone',\n                    title: 'Phone',\n                    getValueOf: item => {\n                      const info = get(item, 'agent_application.application') || get(item, 'agent_application.employee');\n\n                      return info?.mobile;\n                    }\n                  },\n                  {\n                    name: 'email',\n                    title: 'Email',\n                    getValueOf: item => {\n                      const info = get(item, 'agent_application.application') || get(item, 'agent_application.employee');\n\n                      return info?.email;\n                    }\n                  },\n                  {\n                    name: 'role',\n                    title: 'Role',\n                    getValueOf: item => {\n                      return (\n                        <Space wrap>\n                          {(get(item, 'agent_application.agent.role') || []).map(role => (\n                            <div key={role} className={style['tag']}>\n                              {role}\n                            </div>\n                          ))}\n                        </Space>\n                      );\n                    }\n                  },\n                  {\n                    name: 'agentName',\n                    title: 'Agent Name',\n                    getValueOf: item => {\n                      return <Link to={`${baseUrl}/detail?id=${get(item, 'agent_application.agent.id')}`}>{get(item, 'agent_application.agent.name')}</Link>;\n                    }\n                  },\n                  {\n                    name: 'status',\n                    title: 'Status',\n                    render: status => {\n                      if (status === 0) {\n                        return <StateTag text=\"Not started\" />;\n                      }\n                      if (status === 1) {\n                        return <StateTag type=\"progress\" text=\"In progress\" />;\n                      }\n\n                      if (status === 2) {\n                        return <StateTag type=\"success\" text=\"Completed\" />;\n                      }\n\n                      return <StateTag text=\"Unknown\" />;\n                    }\n                  },\n                  {\n                    name: 'messages',\n                    title: 'Chat History',\n                    getValueOf: item => {\n                      return (\n                        <Button\n                          className=\"btn-no-padding\"\n                          type=\"link\"\n                          onClick={() => {\n                            modal({\n                              title: 'Chat History',\n                              footer: null,\n                              children: <MessageList agentAvatar={get(item, 'agent_application.agent.avatar')} list={item.messages} startTime={item.start_time} />\n                            });\n                          }}\n                        >\n                          Check\n                        </Button>\n                      );\n                    }\n                  },\n                  {\n                    name: 'start_time',\n                    title: 'Start Time',\n                    format: 'date-DD.MM.YYYY()HH:mm'\n                  },\n                  {\n                    name: 'end_time',\n                    title: 'End Time',\n                    format: 'date-DD.MM.YYYY()HH:mm'\n                  }\n                ]}\n              />\n              <Flex justify=\"flex-end\">\n                <Pagination\n                  showSizeChanger={false}\n                  hideOnSinglePage\n                  total={data.count}\n                  current={page}\n                  pageSize={pageSize}\n                  onChange={page => {\n                    const newSearchParams = new URLSearchParams(searchParams);\n                    newSearchParams.set('page', page);\n                    setSearchParams(newSearchParams);\n                  }}\n                />\n              </Flex>\n            </Flex>\n          );\n        }}\n      />\n    </Flex>\n  );\n});\n\nexport default ChartHistory;\n","// extracted by mini-css-extract-plugin\nexport default {\"page-header\":\"style_page-header__dlhVC__pIGCk\",\"title\":\"style_title__j7bir__pIGCk\"};","import style from './style.module.scss';\nimport { Flex } from 'antd';\nimport classnames from 'classnames';\n\nconst PageHeader = ({ className, title, description }) => {\n  return (\n    <Flex vertical gap={4} className={classnames(className, style['page-header'])}>\n      <div className={style['title']}>\n        <i />\n        {title}\n      </div>\n      {description && <div className={style['description']}>{description}</div>}\n    </Flex>\n  );\n};\n\nexport default PageHeader;\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"history\":\"style_history__SSRYv__pIGCk\",\"title\":\"style_title__wQ4KP__pIGCk\",\"search-input\":\"style_search-input__ZmilC__pIGCk\",\"tag\":\"style_tag__Y1EjT__pIGCk\"};"],"names":["createWithRemoteLoader","modules","_ref","remoteModules","baseUrl","TableView","usePreset","SearchInput","useModal","StateTag","apis","keyword","setKeyword","useState","searchParams","setSearchParams","useSearchParams","modal","page","get","_jsxs","Flex","className","style","vertical","gap","children","_jsx","PageHeader","title","description","justify","value","placeholder","onSearch","Fetch","_objectSpread","Object","assign","agent","getSessionList","params","page_size","render","_ref2","data","dataSource","results","columns","name","getValueOf","item","info","mobile","email","Space","wrap","map","role","Link","to","concat","status","text","type","Button","onClick","footer","MessageList","agentAvatar","list","messages","startTime","start_time","format","Pagination","showSizeChanger","hideOnSinglePage","total","count","current","pageSize","onChange","newSearchParams","URLSearchParams","set","classnames","f","require","k","Symbol","for","l","m","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","props","_owner","exports","Fragment","jsx","jsxs","module"],"sourceRoot":""}