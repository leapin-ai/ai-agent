{"version":3,"file":"static/js/2822.7810f270.chunk.js","mappings":"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","sources":["../node_modules/recorder-core/src/recorder-core.js","../node_modules/recorder-core/recorder.wav.min.js","../node_modules/@kne/speech-text/node_modules/uuid/dist/esm-browser/native.js","../node_modules/@kne/speech-text/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/@kne/speech-text/node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/@kne/speech-text/node_modules/uuid/dist/esm-browser/v4.js","../node_modules/@kne/speech-text/src/record.js","../node_modules/@kne/speech-text/src/realtime.js"],"sourcesContent":["/*\n录音\nhttps://github.com/xiangyuecn/Recorder\n*/\n(function(factory){\n\tvar browser=typeof window==\"object\" && !!window.document;\n\tvar win=browser?window:Object; //非浏览器环境，Recorder挂载在Object下面\n\tfactory(win,browser);\n\t//umd returnExports.js\n\tif(typeof(define)=='function' && define.amd){\n\t\tdefine(function(){\n\t\t\treturn win.Recorder;\n\t\t});\n\t};\n\tif(typeof(module)=='object' && module.exports){\n\t\tmodule.exports=win.Recorder;\n\t};\n}(function(Export,isBrowser){\n\"use strict\";\n\nvar NOOP=function(){};\nvar IsNum=function(v){return typeof v==\"number\"};\nvar ToJson=function(v){return JSON.stringify(v)};\n\nvar Recorder=function(set){\n\treturn new initFn(set);\n};\nvar LM=Recorder.LM=\"2025-01-11 09:28\";\nvar GitUrl=\"https://github.com/xiangyuecn/Recorder\";\nvar RecTxt=\"Recorder\";\nvar getUserMediaTxt=\"getUserMedia\";\nvar srcSampleRateTxt=\"srcSampleRate\";\nvar sampleRateTxt=\"sampleRate\";\nvar bitRateTxt=\"bitRate\";\nvar CatchTxt=\"catch\";\n\nvar WRec2=Export[RecTxt];//重复加载js\nif(WRec2&&WRec2.LM==LM){\n\tWRec2.CLog(WRec2.i18n.$T(\"K8zP::重复导入{1}\",0,RecTxt),3);\n\treturn;\n};\n\n\n//是否已经打开了全局的麦克风录音，所有工作都已经准备好了，就等接收音频数据了\nRecorder.IsOpen=function(){\n\tvar stream=Recorder.Stream;\n\tif(stream){\n\t\tvar tracks=Tracks_(stream), track=tracks[0];\n\t\tif(track){\n\t\t\tvar state=track.readyState;\n\t\t\treturn state==\"live\"||state==track.LIVE;\n\t\t};\n\t};\n\treturn false;\n};\n/*H5录音时的AudioContext缓冲大小。会影响H5录音时的onProcess调用速率，相对于AudioContext.sampleRate=48000时，4096接近12帧/s，调节此参数可生成比较流畅的回调动画。\n\t取值256, 512, 1024, 2048, 4096, 8192, or 16384\n\t注意，取值不能过低，2048开始不同浏览器可能回调速率跟不上造成音质问题。\n\t一般无需调整，调整后需要先close掉已打开的录音，再open时才会生效。\n*/\nRecorder.BufferSize=4096;\n//销毁已持有的所有全局资源，当要彻底移除Recorder时需要显式的调用此方法\nRecorder.Destroy=function(){\n\tCLog(RecTxt+\" Destroy\");\n\tDisconnect();//断开可能存在的全局Stream、资源\n\t\n\tfor(var k in DestroyList){\n\t\tDestroyList[k]();\n\t};\n};\nvar DestroyList={};\n//登记一个需要销毁全局资源的处理方法\nRecorder.BindDestroy=function(key,call){\n\tDestroyList[key]=call;\n};\n//判断浏览器是否支持录音，随时可以调用。注意：仅仅是检测浏览器支持情况，不会判断和调起用户授权，不会判断是否支持特定格式录音。\nRecorder.Support=function(){\n\tif(!isBrowser) return false;\n\tvar scope=navigator.mediaDevices||{};\n\tif(!scope[getUserMediaTxt]){\n\t\tscope=navigator;\n\t\tscope[getUserMediaTxt]||(scope[getUserMediaTxt]=scope.webkitGetUserMedia||scope.mozGetUserMedia||scope.msGetUserMedia);\n\t};\n\tif(!scope[getUserMediaTxt]){\n\t\treturn false;\n\t};\n\tRecorder.Scope=scope;\n\t\n\tif(!Recorder.GetContext()){\n\t\treturn false;\n\t};\n\treturn true;\n};\n//获取AudioContext对象，如果浏览器不支持将返回null。tryNew=false时返回全局的Recorder.Ctx，Ctx.state可能是closed，仅限用于解码等操作。tryNew=true时会尝试创建新的ctx（不支持close的老浏览器依旧返回全局的），注意用完必须自己调用CloseNewCtx(ctx)关闭；注意：非用户操作（触摸、点击等）时调用返回的ctx.state可能是suspended状态，需要在用户操作时调用ctx.resume恢复成running状态，参考rec的runningContext配置\nRecorder.GetContext=function(tryNew){\n\tif(!isBrowser) return null;\n\tvar AC=window.AudioContext;\n\tif(!AC){\n\t\tAC=window.webkitAudioContext;\n\t};\n\tif(!AC){\n\t\treturn null;\n\t};\n\t\n\tvar ctx=Recorder.Ctx, isNew=0;\n\tif(!ctx){ //241020版本后不再保留打开状态的ctx，原因是iOS不全部关闭时新的ctx有可能不正常\n\t\t//不能反复构造，低版本number of hardware contexts reached maximum (6)\n\t\tctx=Recorder.Ctx=new AC(); isNew=1;\n\t\tRecorder.NewCtxs=Recorder.NewCtxs||[];\n\t\t\n\t\tRecorder.BindDestroy(\"Ctx\",function(){\n\t\t\tvar ctx=Recorder.Ctx;\n\t\t\tif(ctx&&ctx.close){//能关掉就关掉，关不掉就保留着\n\t\t\t\tCloseCtx(ctx);\n\t\t\t\tRecorder.Ctx=0;\n\t\t\t};\n\t\t\tvar arr=Recorder.NewCtxs; Recorder.NewCtxs=[];\n\t\t\tfor(var i=0;i<arr.length;i++)CloseCtx(arr[i]);\n\t\t});\n\t};\n\tif(tryNew && ctx.close){//没法关闭的不允许再创建\n\t\tif(!isNew){\n\t\t\tif(!ctx._useC) CloseCtx(ctx); //关闭全局的，不再保留打开状态\n\t\t\tctx=new AC(); //如果是上面新建的就用上面的，不然就用全新的\n\t\t};\n\t\tctx._useC=1;\n\t\tRecorder.NewCtxs.push(ctx);\n\t};\n\treturn ctx;\n};\n//关闭新创建的AudioContext（之前老版本如果是全局的不关闭，241020版本后全部关闭）\nRecorder.CloseNewCtx=function(ctx){\n\tif(ctx && ctx.close){\n\t\tCloseCtx(ctx);\n\t\tvar arr=Recorder.NewCtxs||[],L=arr.length;\n\t\tfor(var i=0;i<arr.length;i++){\n\t\t\tif(arr[i]==ctx){ arr.splice(i,1); break; }\n\t\t}\n\t\tCLog($T(\"mSxV::剩{1}个GetContext未close\",0,L+\"-1=\"+arr.length),arr.length?3:0);\n\t}\n};\nvar CloseCtx=function(ctx){\n\tif(ctx && ctx.close && !ctx._isC){\n\t\tctx._isC=1;\n\t\tif(ctx.state!=\"closed\"){\n\t\t\ttry{ ctx.close() }catch(e){ CLog(\"ctx close err\",1,e) }\n\t\t}\n\t}\n};\n//当AudioContext的状态是suspended时，调用resume恢复状态，但如果没有用户操作resume可能没有回调，封装解决此回调问题；check(count)返回true继续尝试resume，返回false终止任务（不回调False）\nvar ResumeCtx=Recorder.ResumeCtx=function(ctx,check,True,False){\n\tvar isEnd=0,isBind=0,isLsSC=0,runC=0,EL=\"EventListener\",Tag=\"ResumeCtx \";\n\tvar end=function(err,ok){\n\t\tif(isBind){ bind() }\n\t\tif(!isEnd){ isEnd=1; //回调结果\n\t\t\terr&&False(err,runC);\n\t\t\tok&&True(runC);\n\t\t}\n\t\tif(ok){ //监听后续状态变化\n\t\t\tif(!ctx._LsSC && ctx[\"add\"+EL]) ctx[\"add\"+EL](\"statechange\",run);\n\t\t\tctx._LsSC=1; isLsSC=1;\n\t\t}\n\t};\n\tvar bind=function(add){\n\t\tif(add && isBind) return; isBind=add?1:0;\n\t\tvar types=[\"focus\",\"mousedown\",\"mouseup\",\"touchstart\",\"touchend\"];\n\t\tfor(var i=0;i<types.length;i++)\n\t\t\twindow[(add?\"add\":\"remove\")+EL](types[i],run,true);\n\t};\n\tvar run=function(){\n\t\tvar sVal=ctx.state,spEnd=CtxSpEnd(sVal);\n\t\tif(!isEnd && !check(spEnd?++runC:runC))return end(); //终止，不回调\n\t\tif(spEnd){\n\t\t\tif(isLsSC)CLog(Tag+\"sc \"+sVal,3);\n\t\t\tbind(1); //绑定用户事件尝试恢复\n\t\t\tctx.resume().then(function(){ //resume回调不可靠\n\t\t\t\tif(isLsSC)CLog(Tag+\"sc \"+ctx.state);\n\t\t\t\tend(0,1);\n\t\t\t})[CatchTxt](function(e){ //出错且无法恢复\n\t\t\t\tCLog(Tag+\"error\",1,e);\n\t\t\t\tif(!CtxSpEnd(ctx.state)){\n\t\t\t\t\tend(e.message||\"error\");\n\t\t\t\t}\n\t\t\t});\n\t\t}else if(sVal==\"closed\"){\n\t\t\tif(isLsSC && !ctx._isC)CLog(Tag+\"sc \"+sVal,1); //无法恢复，打个日志\n\t\t\tend(\"ctx closed\");\n\t\t}else{ end(0,1) }; //running 或老的无state\n\t};\n\trun();\n};\nvar CtxSpEnd=Recorder.CtxSpEnd=function(v){\n\treturn v==\"suspended\"||v==\"interrupted\"; //后面这个仅iOS有\n};\nvar CtxState=function(ctx){\n\tvar v=ctx.state,msg=\"ctx.state=\"+v;\n\tif(CtxSpEnd(v))msg+=$T(\"nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）\");\n\treturn msg;\n};\n\n\n/*是否启用MediaRecorder.WebM.PCM来进行音频采集连接（如果浏览器支持的话），默认启用，禁用或者不支持时将使用AudioWorklet或ScriptProcessor来连接；MediaRecorder采集到的音频数据比其他方式更好，几乎不存在丢帧现象，所以音质明显会好很多，建议保持开启*/\nvar ConnectEnableWebM=\"ConnectEnableWebM\";\nRecorder[ConnectEnableWebM]=true;\n\n/*是否启用AudioWorklet特性来进行音频采集连接（如果浏览器支持的话），默认禁用，禁用或不支持时将使用过时的ScriptProcessor来连接（如果方法还在的话），当前AudioWorklet的实现在移动端没有ScriptProcessor稳健；ConnectEnableWebM如果启用并且有效时，本参数将不起作用*/\nvar ConnectEnableWorklet=\"ConnectEnableWorklet\";\nRecorder[ConnectEnableWorklet]=false;\n\n/*初始化H5音频采集连接。如果自行提供了sourceStream将只进行一次简单的连接处理。如果是普通麦克风录音，此时的Stream是全局的，Safari上断开后就无法再次进行连接使用，表现为静音，因此使用全部使用全局处理避免调用到disconnect；全局处理也有利于屏蔽底层细节，start时无需再调用底层接口，提升兼容、可靠性。*/\nvar Connect=function(streamStore){\n\tvar bufferSize=streamStore.BufferSize||Recorder.BufferSize;\n\t\n\tvar stream=streamStore.Stream;\n\tvar ctx=stream._c, ctxSR=ctx[sampleRateTxt], srChunk={};\n\t\n\t//获取音频流信息\n\tvar tracks=Tracks_(stream),track=tracks[0],trackSet=null,tsMsg=\"\";\n\tif(track && track.getSettings){\n\t\ttrackSet=track.getSettings();\n\t\tvar trackSR=trackSet[sampleRateTxt];\n\t\tif(trackSR && trackSR!=ctxSR){\n\t\t\ttsMsg=$T(\"eS8i::Stream的采样率{1}不等于{2}，将进行采样率转换（注意：音质不会变好甚至可能变差），主要在移动端未禁用回声消除时会产生此现象，浏览器有回声消除时可能只会返回16k采样率的音频数据，\",0,trackSR,ctxSR);\n\t\t}\n\t}\n\tstream._ts=trackSet;\n\tCLog(tsMsg+\"Stream TrackSet: \"+ToJson(trackSet), tsMsg?3:0);\n\t\n\tvar mediaConn=function(node){\n\t\tvar media=stream._m=ctx.createMediaStreamSource(stream);\n\t\tvar ctxDest=ctx.destination,cmsdTxt=\"createMediaStreamDestination\";\n\t\tif(ctx[cmsdTxt]){\n\t\t\tctxDest=stream._d=ctx[cmsdTxt]();\n\t\t};\n\t\tmedia.connect(node);\n\t\tnode.connect(ctxDest);\n\t}\n\tvar isWebM,isWorklet,badInt,webMTips=\"\";\n\tvar calls=stream._call;\n\t\n\t//浏览器回传的音频数据处理\n\tvar onReceive=function(float32Arr, arrSR){\n\t\tfor(var k0 in calls){//has item\n\t\t\tif(arrSR!=ctxSR){ //MediaRecorder录制的采样率可能和ctx的采样率不同（16k），转换采样率方便统一处理代码也更简单，但音质不会变好，甚至可能会变差一点\n\t\t\t\tsrChunk.index=0;\n\t\t\t\tsrChunk=Recorder.SampleData([float32Arr],arrSR,ctxSR,srChunk,{_sum:1});\n\t\t\t\tvar pcm=srChunk.data;\n\t\t\t\tvar sum=srChunk._sum;\n\t\t\t}else{ //采样率相同，不需要转换采样率\n\t\t\t\tsrChunk={};\n\t\t\t\tvar size=float32Arr.length;\n\t\t\t\t\n\t\t\t\tvar pcm=new Int16Array(size);\n\t\t\t\tvar sum=0;\n\t\t\t\tfor(var j=0;j<size;j++){//floatTo16BitPCM \n\t\t\t\t\tvar s=Math.max(-1,Math.min(1,float32Arr[j]));\n\t\t\t\t\ts=s<0?s*0x8000:s*0x7FFF;\n\t\t\t\t\tpcm[j]=s;\n\t\t\t\t\tsum+=Math.abs(s);\n\t\t\t\t};\n\t\t\t};\n\t\t\t\n\t\t\tfor(var k in calls){\n\t\t\t\tcalls[k](pcm,sum);\n\t\t\t};\n\t\t\t\n\t\t\treturn;\n\t\t};\n\t};\n\t\n\tvar scriptProcessor=\"ScriptProcessor\";//一堆字符串名字，有利于压缩js\n\tvar audioWorklet=\"audioWorklet\";\n\tvar recAudioWorklet=RecTxt+\" \"+audioWorklet;\n\tvar RecProc=\"RecProc\";\n\tvar MediaRecorderTxt=\"MediaRecorder\";\n\tvar MRWebMPCM=MediaRecorderTxt+\".WebM.PCM\";\n\n\n//===================连接方式三=========================\n\t//古董级别的 ScriptProcessor 处理，目前所有浏览器均兼容，虽然是过时的方法，但更稳健，移动端性能比AudioWorklet强\n\tvar oldFn=ctx.createScriptProcessor||ctx.createJavaScriptNode;\n\tvar oldIsBest=$T(\"ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。\",0,audioWorklet);\n\tvar oldScript=function(){\n\t\tisWorklet=stream.isWorklet=false;\n\t\t_Disconn_n(stream);\n\t\tCLog($T(\"7TU0::Connect采用老的{1}，\",0,scriptProcessor)\n\t\t\t+i18n.get(Recorder[ConnectEnableWorklet]?\n\t\t\t\t$T(\"JwCL::但已设置{1}尝试启用{2}\",2)\n\t\t\t\t:$T(\"VGjB::可设置{1}尝试启用{2}\",2)\n\t\t\t\t,[RecTxt+\".\"+ConnectEnableWorklet+\"=true\",audioWorklet]\n\t\t\t)+webMTips+oldIsBest,3);\n\t\t\n\t\tvar process=stream._p=oldFn.call(ctx,bufferSize,1,1);//单声道，省的数据处理复杂\n\t\tmediaConn(process);\n\t\t\n\t\tprocess.onaudioprocess=function(e){\n\t\t\tvar arr=e.inputBuffer.getChannelData(0);\n\t\t\tonReceive(arr, ctxSR);\n\t\t};\n\t};\n\n\n//===================连接方式二=========================\nvar connWorklet=function(){\n\t//尝试开启AudioWorklet处理\n\tisWebM=stream.isWebM=false;\n\t_Disconn_r(stream);\n\t\n\tisWorklet=stream.isWorklet=!oldFn || Recorder[ConnectEnableWorklet];\n\tvar AwNode=window.AudioWorkletNode;\n\tif(!(isWorklet && ctx[audioWorklet] && AwNode)){\n\t\toldScript();//被禁用 或 不支持，直接使用老的\n\t\treturn;\n\t};\n\tvar clazzUrl=function(){\n\t\tvar xf=function(f){return f.toString().replace(/^function|DEL_/g,\"\").replace(/\\$RA/g,recAudioWorklet)};\n\t\tvar clazz='class '+RecProc+' extends AudioWorkletProcessor{';\n\t\t\tclazz+=\"constructor \"+xf(function(option){\n\t\t\t\tDEL_super(option);\n\t\t\t\tvar This=this,bufferSize=option.processorOptions.bufferSize;\n\t\t\t\tThis.bufferSize=bufferSize;\n\t\t\t\tThis.buffer=new Float32Array(bufferSize*2);//乱给size搞乱缓冲区不管\n\t\t\t\tThis.pos=0;\n\t\t\t\tThis.port.onmessage=function(e){\n\t\t\t\t\tif(e.data.kill){\n\t\t\t\t\t\tThis.kill=true;\n\t\t\t\t\t\t$C.log(\"$RA kill call\");\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t$C.log(\"$RA .ctor call\", option);\n\t\t\t});\n\t\t\t\n\t\t\t//https://developer.mozilla.org/en-US/docs/Web/API/AudioWorkletProcessor/process 每次回调128个采样数据，1秒375次回调，高频导致移动端性能问题，结果就是回调次数缺斤少两，进而导致丢失数据，PC端似乎没有性能问题\n\t\t\tclazz+=\"process \"+xf(function(input,b,c){//需要等到ctx激活后才会有回调\n\t\t\t\tvar This=this,bufferSize=This.bufferSize;\n\t\t\t\tvar buffer=This.buffer,pos=This.pos;\n\t\t\t\tinput=(input[0]||[])[0]||[];\n\t\t\t\tif(input.length){\n\t\t\t\t\tbuffer.set(input,pos);\n\t\t\t\t\tpos+=input.length;\n\t\t\t\t\t\n\t\t\t\t\tvar len=~~(pos/bufferSize)*bufferSize;\n\t\t\t\t\tif(len){\n\t\t\t\t\t\tthis.port.postMessage({ val: buffer.slice(0,len) });\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar more=buffer.subarray(len,pos);\n\t\t\t\t\t\tbuffer=new Float32Array(bufferSize*2);\n\t\t\t\t\t\tbuffer.set(more);\n\t\t\t\t\t\tpos=more.length;\n\t\t\t\t\t\tThis.buffer=buffer;\n\t\t\t\t\t}\n\t\t\t\t\tThis.pos=pos;\n\t\t\t\t}\n\t\t\t\treturn !This.kill;\n\t\t\t});\n\t\tclazz+='}'\n\t\t\t+'try{'\n\t\t\t\t+'registerProcessor(\"'+RecProc+'\", '+RecProc+')'\n\t\t\t+'}catch(e){$C.error(\"'+recAudioWorklet+' Reg Error\",e)}';\n\t\tclazz=clazz.replace(/\\$C\\./g,\"console.\");//一些编译器会文本替换日志函数\n\t\t//URL.createObjectURL 本地有些浏览器会报 Not allowed to load local resource，直接用dataurl\n\t\treturn \"data:text/javascript;base64,\"+btoa(unescape(encodeURIComponent(clazz)));\n\t};\n\t\n\tvar awNext=function(){//可以继续，没有调用断开\n\t\treturn isWorklet && stream._na;\n\t};\n\tvar nodeAlive=stream._na=function(){\n\t\t//start时会调用，只要没有收到数据就断定AudioWorklet有问题，恢复用老的\n\t\tif(badInt!==\"\"){//没有回调过数据\n\t\t\tclearTimeout(badInt);\n\t\t\tbadInt=setTimeout(function(){\n\t\t\t\tbadInt=0;\n\t\t\t\tif(awNext()){\n\t\t\t\t\tCLog($T(\"MxX1::{1}未返回任何音频，恢复使用{2}\",0,audioWorklet,scriptProcessor),3);\n\t\t\t\t\toldFn&&oldScript();//未来没有老的，可能是误判\n\t\t\t\t};\n\t\t\t},500);\n\t\t};\n\t};\n\tvar createNode=function(){\n\t\tif(!awNext())return;\n\t\tvar node=stream._n=new AwNode(ctx, RecProc, {\n\t\t\tprocessorOptions:{bufferSize:bufferSize}\n\t\t});\n\t\tmediaConn(node);\n\t\tnode.port.onmessage=function(e){\n\t\t\tif(badInt){\n\t\t\t\tclearTimeout(badInt);badInt=\"\";\n\t\t\t};\n\t\t\tif(awNext()){\n\t\t\t\tonReceive(e.data.val, ctxSR);\n\t\t\t}else if(!isWorklet){\n\t\t\t\tCLog($T(\"XUap::{1}多余回调\",0,audioWorklet),3);\n\t\t\t};\n\t\t};\n\t\tCLog($T(\"yOta::Connect采用{1}，设置{2}可恢复老式{3}\",0,audioWorklet,RecTxt+\".\"+ConnectEnableWorklet+\"=false\",scriptProcessor)+webMTips+oldIsBest,3);\n\t};\n\t\n\t//如果start时的resume和下面的构造node同时进行，将会导致部分浏览器崩溃 (STATUS_ACCESS_VIOLATION)，源码assets中 ztest_chrome_bug_AudioWorkletNode.html 可测试。所以，将所有代码套到resume里面（不管catch），避免出现这个问题\n\tvar ctxOK=function(){\n\t\tif(!awNext())return;\n\t\tif(ctx[RecProc]){\n\t\t\tcreateNode();\n\t\t\treturn;\n\t\t};\n\t\tvar url=clazzUrl();\n\t\tctx[audioWorklet].addModule(url).then(function(e){\n\t\t\tif(!awNext())return;\n\t\t\tctx[RecProc]=1;\n\t\t\tcreateNode();\n\t\t\tif(badInt){//重新计时\n\t\t\t\tnodeAlive();\n\t\t\t};\n\t\t})[CatchTxt](function(e){ //fix 关键字，保证catch压缩时保持字符串形式\n\t\t\tCLog(audioWorklet+\".addModule Error\",1,e);\n\t\t\tawNext()&&oldScript();\n\t\t});\n\t};\n\tResumeCtx(ctx,function(){ return awNext() } ,ctxOK,ctxOK);\n};\n\n\n//===================连接方式一=========================\nvar connWebM=function(){\n\t//尝试开启MediaRecorder录制webm+pcm处理\n\tvar MR=window[MediaRecorderTxt];\n\tvar onData=\"ondataavailable\";\n\tvar webmType=\"audio/webm; codecs=pcm\";\n\tisWebM=stream.isWebM=Recorder[ConnectEnableWebM];\n\t\n\tvar supportMR=MR && (onData in MR.prototype) && MR.isTypeSupported(webmType);\n\twebMTips=supportMR?\"\":$T(\"VwPd::（此浏览器不支持{1}）\",0,MRWebMPCM);\n\tif(!isWebM || !supportMR){\n\t\tconnWorklet(); //被禁用 或 不支持MediaRecorder 或 不支持webm+pcm\n\t\treturn;\n\t}\n\t\n\tvar mrNext=function(){//可以继续，没有调用断开\n\t\treturn isWebM && stream._ra;\n\t};\n\tstream._ra=function(){\n\t\t//start时会调用，只要没有收到数据就断定MediaRecorder有问题，降级处理\n\t\tif(badInt!==\"\"){//没有回调过数据\n\t\t\tclearTimeout(badInt);\n\t\t\tbadInt=setTimeout(function(){\n\t\t\t\t//badInt=0; 保留给nodeAlive继续判断\n\t\t\t\tif(mrNext()){\n\t\t\t\t\tCLog($T(\"vHnb::{1}未返回任何音频，降级使用{2}\",0,MediaRecorderTxt,audioWorklet),3);\n\t\t\t\t\tconnWorklet();\n\t\t\t\t};\n\t\t\t},500);\n\t\t};\n\t};\n\t\n\tvar mrSet=Object.assign({mimeType:webmType}, Recorder.ConnectWebMOptions);\n\tvar mr=stream._r=new MR(stream, mrSet);\n\tvar webmData=stream._rd={};\n\tmr[onData]=function(e){\n\t\t//提取webm中的pcm数据，提取失败就等着badInt超时降级处理\n\t\tvar reader=new FileReader();\n\t\treader.onloadend=function(){\n\t\t\tif(mrNext()){\n\t\t\t\tvar f32arr=WebM_Extract(new Uint8Array(reader.result),webmData);\n\t\t\t\tif(!f32arr)return;\n\t\t\t\tif(f32arr==-1){//无法提取，立即降级\n\t\t\t\t\tconnWorklet();\n\t\t\t\t\treturn;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif(badInt){\n\t\t\t\t\tclearTimeout(badInt);badInt=\"\";\n\t\t\t\t};\n\t\t\t\tonReceive(f32arr, webmData.webmSR);\n\t\t\t}else if(!isWebM){\n\t\t\t\tCLog($T(\"O9P7::{1}多余回调\",0,MediaRecorderTxt),3);\n\t\t\t};\n\t\t};\n\t\treader.readAsArrayBuffer(e.data);\n\t};\n\ttry{\n\t\tmr.start(~~(bufferSize/48));//按48k时的回调间隔\n\t\tCLog($T(\"LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}\",0,MRWebMPCM,RecTxt+\".\"+ConnectEnableWebM+\"=false\",audioWorklet,scriptProcessor));\n\t}catch(e){ //存在视频流时可能会抛异常\n\t\tCLog(\"mr start err\",1,e);\n\t\tconnWorklet();\n\t};\n};\n\n\tconnWebM();\n};\nvar ConnAlive=function(stream){\n\tif(stream._na) stream._na(); //检查AudioWorklet连接是否有效，无效就回滚到老的ScriptProcessor\n\tif(stream._ra) stream._ra(); //检查MediaRecorder连接是否有效，无效就降级处理\n};\nvar _Disconn_n=function(stream){\n\tstream._na=null;\n\tif(stream._n){\n\t\tstream._n.port.postMessage({kill:true});\n\t\tstream._n.disconnect();\n\t\tstream._n=null;\n\t};\n};\nvar _Disconn_r=function(stream){\n\tstream._ra=null;\n\tif(stream._r){\n\t\ttry{ stream._r.stop() }catch(e){ CLog(\"mr stop err\",1,e) }\n\t\tstream._r=null;\n\t};\n};\nvar Disconnect=function(streamStore){\n\tstreamStore=streamStore||Recorder;\n\tvar isGlobal=streamStore==Recorder;\n\t\n\tvar stream=streamStore.Stream;\n\tif(stream){\n\t\tif(stream._m){\n\t\t\tstream._m.disconnect();\n\t\t\tstream._m=null;\n\t\t};\n\t\tif(!stream._RC && stream._c){//提供的runningContext不处理\n\t\t\tRecorder.CloseNewCtx(stream._c);\n\t\t};\n\t\tstream._RC=null; stream._c=null;\n\t\tif(stream._d){\n\t\t\tStopS_(stream._d.stream);\n\t\t\tstream._d=null;\n\t\t};\n\t\tif(stream._p){\n\t\t\tstream._p.disconnect();\n\t\t\tstream._p.onaudioprocess=stream._p=null;\n\t\t};\n\t\t_Disconn_n(stream);\n\t\t_Disconn_r(stream);\n\t\t\n\t\tif(isGlobal){//全局的时候，要把流关掉（麦克风），直接提供的流不处理\n\t\t\tStopS_(stream);\n\t\t};\n\t};\n\tstreamStore.Stream=0;\n};\n//关闭一个音频流\nvar StopS_=Recorder.StopS_=function(stream){\n\tvar tracks=Tracks_(stream);\n\tfor(var i=0;i<tracks.length;i++){\n\t\tvar track=tracks[i];\n\t\ttrack.stop&&track.stop();\n\t};\n\tstream.stop&&stream.stop();\n};\n//获取流中的所有轨道\nvar Tracks_=function(stream){\n\tvar arr1=0,arr2=0,arr=[];\n\t//stream.getTracks() 得到的sourceStream还得去排序 不然第一个可能是video\n\tif(stream.getAudioTracks){ arr1=stream.getAudioTracks(); arr2=stream.getVideoTracks(); }\n\tif(!arr1){ arr1=stream.audioTracks; arr2=stream.videoTracks; }\n\tfor(var i=0,L=arr1?arr1.length:0;i<L;i++)arr.push(arr1[i]); //音频放前面，方便取[0]\n\tfor(var i=0,L=arr2?arr2.length:0;i<L;i++)arr.push(arr2[i]);\n\treturn arr;\n};\n\n/*对pcm数据的采样率进行转换\npcmDatas: [[Int16,...]] pcm片段列表，二维数组里面是Int16Array，也可传Float32Array（会转成Int16Array）\npcmSampleRate:48000 pcm数据的采样率\nnewSampleRate:16000 需要转换成的采样率，241020版本后支持转成任意采样率，之前老版本newSampleRate>=pcmSampleRate时不会进行任何处理，小于时会进行重新采样\nprevChunkInfo:{} 可选，上次调用时的返回值，用于连续转换，本次调用将从上次结束位置开始进行处理。或可自行定义一个ChunkInfo从pcmDatas指定的位置开始进行转换\noption:{ 可选，配置项\n\t\tframeSize:123456 帧大小，每帧的PCM Int16的数量，采样率转换后的pcm长度为frameSize的整数倍，用于连续转换。目前仅在mp3格式时才有用，frameSize取值为1152，这样编码出来的mp3时长和pcm的时长完全一致，否则会因为mp3最后一帧录音不够填满时添加填充数据导致mp3的时长变长。\n\t\tframeType:\"\" 帧类型，一般为rec.set.type，提供此参数时无需提供frameSize，会自动使用最佳的值给frameSize赋值，目前仅支持mp3=1152(MPEG1 Layer3的每帧采采样数)，其他类型=1。\n\t\t\t以上两个参数用于连续转换时使用，最多使用一个，不提供时不进行帧的特殊处理，提供时必须同时提供prevChunkInfo才有作用。最后一段数据处理时无需提供帧大小以便输出最后一丁点残留数据。\n\t}\n\n返回ChunkInfo:{\n\t//可定义，从指定位置开始转换到结尾\n\tindex:0 pcmDatas已处理到的索引；比如每次都是单个pcm需要连续处理时，可每次调用前重置成0，pcmDatas仅需传入`[pcm]`固定一个元素\n\toffset:0.0 已处理到的index对应的pcm中的偏移的下一个位置（提升采样率时为结果的pcm）\n\traisePrev:null 提升采样率时的前一个pcm结果采样值\n\t\n\t//可定义，指定的一个滤波配置：默认使用Recorder.IIRFilter低通滤波（可有效抑制混叠产生的杂音，小采样率大于高采样率的75%时不默认滤波），如果提供了配置但fn为null时将不滤波；sr、srn为此滤波函数对应的初始化采样率，当采样率和参数的不一致时将重新设为默认函数\n\tfilter:null||{fn:fn(sample),sr:pcmSampleRate,srn:newSampleRate}\n\t\n\t//仅作为返回值\n\tframeNext:null||[Int16,...] 下一帧的部分数据，frameSize设置了的时候才可能会有\n\tsampleRate:16000 结果的采样率=newSampleRate，老版本<=newSampleRate\n\tdata:[Int16,...] 转换后的PCM结果；如果是连续转换，并且pcmDatas中并没有新数据时，data的长度可能为0\n}\n*/\nRecorder.SampleData=function(pcmDatas,pcmSampleRate,newSampleRate,prevChunkInfo,option){\n\tvar Txt=\"SampleData\";\n\tprevChunkInfo||(prevChunkInfo={});\n\tvar index=prevChunkInfo.index||0;\n\tvar offset=prevChunkInfo.offset||0;\n\tvar raisePrev=prevChunkInfo.raisePrev||0;\n\t\n\tvar filter=prevChunkInfo.filter;\n\tif(filter&&filter.fn&&(filter.sr&&filter.sr!=pcmSampleRate || filter.srn&&filter.srn!=newSampleRate)){\n\t\tfilter=null; CLog($T(\"d48C::{1}的filter采样率变了，重设滤波\",0,Txt),3);\n\t};\n\tif(!filter){ //采样率差距比较大才开启低通滤波\n\t\tif(newSampleRate<=pcmSampleRate){ //降低采样率或不变，最高频率用新采样率频率的3/4\n\t\t\tvar freq=newSampleRate>pcmSampleRate*3/4?0: newSampleRate/2 *3/4;\n\t\t\tfilter={fn:freq?Recorder.IIRFilter(true,pcmSampleRate,freq):0};\n\t\t}else{ //提升采样率，最高频率用原始采样率频率的3/4\n\t\t\tvar freq=pcmSampleRate>newSampleRate*3/4?0: pcmSampleRate/2 *3/4;\n\t\t\tfilter={fn:freq?Recorder.IIRFilter(true,newSampleRate,freq):0};\n\t\t};\n\t};\n\tfilter.sr=pcmSampleRate;\n\tfilter.srn=newSampleRate;\n\tvar filterFn=filter.fn;\n\t\n\tvar frameNext=prevChunkInfo.frameNext||[];\n\toption||(option={});\n\tvar frameSize=option.frameSize||1;\n\tif(option.frameType){\n\t\tframeSize=option.frameType==\"mp3\"?1152:1;\n\t};\n\tvar useSum=option._sum, _sum=0; //内部用的，sum不考虑配置了frame\n\t\n\tvar nLen=pcmDatas.length;\n\tif(index>nLen+1){\n\t\tCLog($T(\"tlbC::{1}似乎传入了未重置chunk {2}\",0,Txt,index+\">\"+nLen),3);\n\t};\n\tvar size=0;\n\tfor(var i=index;i<nLen;i++){\n\t\tsize+=pcmDatas[i].length;\n\t};\n\t\n\t//采样 https://www.cnblogs.com/blqw/p/3782420.html\n\tvar step=pcmSampleRate/newSampleRate;\n\tif(step>1){//新采样低于录音采样，进行抽样\n\t\tsize=Math.max(0,size-Math.floor(offset));\n\t\tsize=Math.floor(size/step);\n\t}else if(step<1){//新采样高于录音采样，插值处理\n\t\tvar raiseStep=1/step;\n\t\tsize=Math.floor(size*raiseStep);\n\t};\n\t\n\tsize+=frameNext.length;\n\tvar res=new Int16Array(size);\n\tvar idx=0;\n\t//添加上一次不够一帧的剩余数据\n\tfor(var i=0;i<frameNext.length;i++){\n\t\tres[idx]=frameNext[i];\n\t\tidx++;\n\t};\n\t//处理数据\n\tfor (;index<nLen;index++) {\n\t\tvar o=pcmDatas[index], isF32=o instanceof Float32Array;\n\t\tvar i=offset,il=o.length;\n\t\tvar F=filterFn&&filterFn.Embed,F1=0,F2=0,Fx=0,Fy=0;//低通滤波后的数据\n\t\t\n\t\tif(step<1){ //提升采样率\n\t\t\tvar idx1=idx+i, prev=raisePrev;\n\t\t\tfor(var i0=0;i0<il;i0++){\n\t\t\t\tvar oVal=o[i0];\n\t\t\t\tif(isF32){//floatTo16BitPCM \n\t\t\t\t\toVal=Math.max(-1,Math.min(1,oVal));\n\t\t\t\t\toVal=oVal<0?oVal*0x8000:oVal*0x7FFF;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar pos=Math.floor(idx1);\n\t\t\t\tidx1+=raiseStep;\n\t\t\t\tvar end=Math.floor(idx1);\n\t\t\t\n\t\t\t\t//简单的从prev平滑填充到cur，有效减少转换引入的杂音\n\t\t\t\tvar n=(oVal-prev)/(end-pos);\n\t\t\t\tfor(var j=1;pos<end;pos++,j++){\n\t\t\t\t\tvar s=Math.floor(prev+(j*n));\n\t\t\t\t\tif(F){//IIRFilter代码内置，比函数调用快4倍\n\t\t\t\t\t\tFx=s;\n\t\t\t\t\t\tFy=F.b0 * Fx + F.b1 * F.x1 + F.b0 * F.x2 - F.a1 * F.y1 - F.a2 * F.y2;\n\t\t\t\t\t\tF.x2 = F.x1; F.x1 = Fx; F.y2 = F.y1; F.y1 = Fy;\n\t\t\t\t\t\ts=Fy;\n\t\t\t\t\t}else{ s=filterFn?filterFn(s):s; }\n\t\t\t\t\t\n\t\t\t\t\tif(s>0x7FFF) s=0x7FFF; else if(s<-0x8000) s=-0x8000; //Int16越界处理\n\t\t\t\t\tif(useSum) _sum+=Math.abs(s);\n\t\t\t\t\tres[pos]=s;\n\t\t\t\t\tidx++;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tprev=raisePrev=oVal;\n\t\t\t\ti+=raiseStep;//插值\n\t\t\t}\n\t\t\toffset=i%1;\n\t\t\tcontinue;\n\t\t};\n\t\t//降低采样率或不变\n\t\tfor(var i0=0,i2=0;i0<il;i0++,i2++){\n\t\t\tif(i2<il){\n\t\t\t\tvar oVal=o[i2];\n\t\t\t\tif(isF32){//floatTo16BitPCM \n\t\t\t\t\toVal=Math.max(-1,Math.min(1,oVal));\n\t\t\t\t\toVal=oVal<0?oVal*0x8000:oVal*0x7FFF;\n\t\t\t\t}\n\t\t\t\tif(F){//IIRFilter代码内置，比函数调用快4倍\n\t\t\t\t\tFx=oVal;\n\t\t\t\t\tFy=F.b0 * Fx + F.b1 * F.x1 + F.b0 * F.x2 - F.a1 * F.y1 - F.a2 * F.y2;\n\t\t\t\t\tF.x2 = F.x1; F.x1 = Fx; F.y2 = F.y1; F.y1 = Fy;\n\t\t\t\t}else{ Fy=filterFn?filterFn(oVal):oVal; }\n\t\t\t}\n\t\t\tF1=F2; F2=Fy;\n\t\t\tif(i2==0){ i0--; continue; } //首次只计算o[0]\n\t\t\t\n\t\t\t//https://www.cnblogs.com/xiaoqi/p/6993912.html\n\t\t\t//当前点=当前点+到后面一个点之间的增量，音质比直接简单抽样好些\n\t\t\tvar before = Math.floor(i);\n\t\t\tif(i0!=before)continue;\n\t\t\tvar after = Math.ceil(i);\n\t\t\tvar atPoint = i - before;\n\t\t\t\n\t\t\tvar beforeVal=F1;\n\t\t\tvar afterVal=after<il ? F2 : beforeVal; //后个点越界了，忽略不计\n\t\t\tvar val=beforeVal+(afterVal-beforeVal)*atPoint;\n\t\t\t\n\t\t\tif(val>0x7FFF) val=0x7FFF; else if(val<-0x8000) val=-0x8000; //Int16越界处理\n\t\t\tif(useSum) _sum+=Math.abs(val);\n\t\t\tres[idx]=val;\n\t\t\t\n\t\t\tidx++;\n\t\t\ti+=step;//抽样\n\t\t};\n\t\toffset=Math.max(0, i-il); //不太可能出现负数\n\t};\n\tif(step<1 && idx+1==size){ //提升采样率时可能缺1个，直接删除结尾1个\n\t\tsize--; res=new Int16Array(res.buffer.slice(0, size*2));\n\t};\n\tif(idx-1!=size && idx!=size)CLog(Txt+\" idx:\"+idx+\" != size:\"+size,3); //越界1个\n\t\n\t//帧处理\n\tframeNext=null;\n\tvar frameNextSize=size%frameSize;\n\tif(frameNextSize>0){\n\t\tvar u8Pos=(size-frameNextSize)*2;\n\t\tframeNext=new Int16Array(res.buffer.slice(u8Pos));\n\t\tres=new Int16Array(res.buffer.slice(0,u8Pos));\n\t};\n\t\n\tvar obj={\n\t\tindex:index\n\t\t,offset:offset\n\t\t,raisePrev:raisePrev\n\t\t,filter:filter\n\t\t\n\t\t,frameNext:frameNext\n\t\t,sampleRate:newSampleRate\n\t\t,data:res\n\t};\n\tif(useSum) obj._sum=_sum;\n\treturn obj;\n};\n\n/*IIR低通、高通滤波，移植自：https://gitee.com/52jian/digital-audio-filter AudioFilter.java\n\tuseLowPass: true或false，true为低通滤波，false为高通滤波\n\tsampleRate: 待处理pcm的采样率\n\tfreq: 截止频率Hz，最大频率为sampleRate/2，低通时会切掉高于此频率的声音，高通时会切掉低于此频率的声音，注意滤波并非100%的切掉不需要的声音，而是减弱频率对应的声音，离截止频率越远对应声音减弱越厉害，离截止频率越近声音就几乎无衰减\n\t返回的是一个函数，用此函数对pcm的每个采样值按顺序进行处理即可（不同pcm不可共用）；注意此函数返回值可能会越界超过Int16范围，自行限制一下即可：Math.min(Math.max(val,-0x8000),0x7FFF)\n可重新赋值一个函数，来改变Recorder的默认行为，比如SampleData中的低通滤波*/\nRecorder.IIRFilter=function(useLowPass, sampleRate, freq){\n\tvar ov = 2 * Math.PI * freq / sampleRate;\n\tvar sn = Math.sin(ov);\n\tvar cs = Math.cos(ov);\n\tvar alpha = sn / 2;\n\t\n\tvar a0 = 1 + alpha;\n\tvar a1 = (-2 * cs) / a0;\n\tvar a2 = (1 - alpha) / a0;\n\tif(useLowPass){\n\t\tvar b0 = (1 - cs) / 2 / a0;\n\t\tvar b1 = (1 - cs) / a0;\n\t}else{\n\t\tvar b0 = (1 + cs) / 2 / a0;\n\t\tvar b1 = -(1 + cs) / a0;\n\t}\n\t\n\tvar x1=0,x2=0,y=0,y1=0,y2=0;\n\tvar fn=function(x){\n\t\ty = b0 * x + b1 * x1 + b0 * x2 - a1 * y1 - a2 * y2;\n\t\tx2 = x1; x1 = x;\n\t\ty2 = y1; y1 = y;\n\t\treturn y;\n\t};\n\tfn.Embed={x1:0,x2:0,y1:0,y2:0,b0:b0,b1:b1,a1:a1,a2:a2};\n\treturn fn;\n};\n\n\n/*计算音量百分比的一个方法\npcmAbsSum: pcm Int16所有采样的绝对值的和\npcmLength: pcm长度\n返回值：0-100，主要当做百分比用\n注意：这个不是分贝，因此没用volume当做名称*/\nRecorder.PowerLevel=function(pcmAbsSum,pcmLength){\n\t/*计算音量 https://blog.csdn.net/jody1989/article/details/73480259\n\t更高灵敏度算法:\n\t\t限定最大感应值10000\n\t\t\t线性曲线：低音量不友好\n\t\t\t\tpower/10000*100 \n\t\t\t对数曲线：低音量友好，但需限定最低感应值\n\t\t\t\t(1+Math.log10(power/10000))*100\n\t*/\n\tvar power=(pcmAbsSum/pcmLength) || 0;//NaN\n\tvar level;\n\tif(power<1251){//1250的结果10%，更小的音量采用线性取值\n\t\tlevel=Math.round(power/1250*10);\n\t}else{\n\t\tlevel=Math.round(Math.min(100,Math.max(0,(1+Math.log(power/10000)/Math.log(10))*100)));\n\t};\n\treturn level;\n};\n\n/*计算音量，单位dBFS（满刻度相对电平）\nmaxSample: 为16位pcm采样的绝对值中最大的一个（计算峰值音量），或者为pcm中所有采样的绝对值的平局值\n返回值：-100~0 （最大值0dB，最小值-100代替-∞）\n*/\nRecorder.PowerDBFS=function(maxSample){\n\tvar val=Math.max(0.1, maxSample||0),Pref=0x7FFF;\n\tval=Math.min(val,Pref);\n\t//https://www.logiclocmusic.com/can-you-tell-the-decibel/\n\t//https://blog.csdn.net/qq_17256689/article/details/120442510\n\tval=20*Math.log(val/Pref)/Math.log(10);\n\treturn Math.max(-100,Math.round(val));\n};\n\n\n\n\n//带时间的日志输出，可设为一个空函数来屏蔽日志输出\n//CLog(msg,errOrLogMsg, logMsg...) err为数字时代表日志类型1:error 2:log默认 3:warn，否则当做内容输出，第一个参数不能是对象因为要拼接时间，后面可以接无数个输出参数\nRecorder.CLog=function(msg,err){\n\tif(typeof console!=\"object\")return;\n\tvar now=new Date();\n\tvar t=(\"0\"+now.getMinutes()).substr(-2)\n\t\t+\":\"+(\"0\"+now.getSeconds()).substr(-2)\n\t\t+\".\"+(\"00\"+now.getMilliseconds()).substr(-3);\n\tvar recID=this&&this.envIn&&this.envCheck&&this.id;\n\tvar arr=[\"[\"+t+\" \"+RecTxt+(recID?\":\"+recID:\"\")+\"]\"+msg];\n\tvar a=arguments,cwe=Recorder.CLog;\n\tvar i=2,fn=cwe.log||console.log;\n\tif(IsNum(err)){\n\t\tfn=err==1?cwe.error||console.error:err==3?cwe.warn||console.warn:fn;\n\t}else{\n\t\ti=1;\n\t};\n\tfor(;i<a.length;i++){\n\t\tarr.push(a[i]);\n\t};\n\tif(IsLoser){//古董浏览器，仅保证基本的可执行不代码异常\n\t\tfn&&fn(\"[IsLoser]\"+arr[0],arr.length>1?arr:\"\");\n\t}else{\n\t\tfn.apply(console,arr);\n\t};\n};\nvar CLog=function(){ Recorder.CLog.apply(this,arguments); };\nvar IsLoser=true;try{IsLoser=!console.log.apply;}catch(e){};\n\n\n\n\nvar ID=0;\nfunction initFn(set){\n\tvar This=this; This.id=++ID;\n\t\n\t//如果开启了流量统计，这里将发送一个图片请求\n\tTraffic();\n\t\n\t\n\tvar o={\n\t\ttype:\"mp3\" //输出类型：mp3,wav，wav输出文件尺寸超大不推荐使用，但mp3编码支持会导致js文件超大，如果不需支持mp3可以使js文件大幅减小\n\t\t//,bitRate:16 //比特率 wav:16或8位，MP3：8kbps 1k/s，8kbps 2k/s 录音文件很小\n\t\t\n\t\t//,sampleRate:16000 //采样率，wav格式大小=sampleRate*时间；mp3此项对低比特率有影响，高比特率几乎无影响。\n\t\t\t\t\t//wav任意值，mp3取值范围：48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000\n\t\t\t\t\t//采样率参考https://www.cnblogs.com/devin87/p/mp3-recorder.html\n\t\t\n\t\t,onProcess:NOOP //fn(buffers,powerLevel,bufferDuration,bufferSampleRate,newBufferIdx,asyncEnd) buffers=[[Int16,...],...]：缓冲的PCM数据，为从开始录音到现在的所有pcm片段；powerLevel：当前缓冲的音量级别0-100，bufferDuration：已缓冲时长，bufferSampleRate：缓冲使用的采样率（当type支持边录边转码(Worker)时，此采样率和设置的采样率相同，否则不一定相同）；newBufferIdx:本次回调新增的buffer起始索引；asyncEnd:fn() 如果onProcess是异步的(返回值为true时)，处理完成时需要调用此回调，如果不是异步的请忽略此参数，此方法回调时必须是真异步（不能真异步时需用setTimeout包裹）。onProcess返回值：如果返回true代表开启异步模式，在某些大量运算的场合异步是必须的，必须在异步处理完成时调用asyncEnd(不能真异步时需用setTimeout包裹)，在onProcess执行后新增的buffer会全部替换成空数组，因此本回调开头应立即将newBufferIdx到本次回调结尾位置的buffer全部保存到另外一个数组内，处理完成后写回buffers中本次回调的结尾位置。\n\t\t\n\t\t//*******高级设置******\n\t\t//,sourceStream:MediaStream Object\n\t\t\t\t//可选直接提供一个媒体流，从这个流中录制、实时处理音频数据（当前Recorder实例独享此流）；不提供时为普通的麦克风录音，由getUserMedia提供音频流（所有Recorder实例共享同一个流）\n\t\t\t\t//比如：audio、video标签dom节点的captureStream方法（实验特性，不同浏览器支持程度不高）返回的流；WebRTC中的remote流；自己创建的流等\n\t\t\t\t//注意：流内必须至少存在一条音轨(Audio Track)，比如audio标签必须等待到可以开始播放后才会有音轨，否则open会失败\n\t\t\n\t\t//,runningContext:AudioContext\n\t\t\t\t//可选提供一个state为running状态的AudioContext对象(ctx)；默认会在rec.open时自动创建一个新的ctx，无用户操作（触摸、点击等）时调用rec.open的ctx.state可能为suspended，会在rec.start时尝试进行ctx.resume，如果也无用户操作ctx.resume可能不会恢复成running状态（目前仅iOS上有此兼容性问题），导致无法去读取媒体流，这时请提前在用户操作时调用Recorder.GetContext(true)来得到一个running状态AudioContext（用完需调用CloseNewCtx(ctx)关闭）\n\t\t\n\t\t//,audioTrackSet:{ deviceId:\"\",groupId:\"\", autoGainControl:true, echoCancellation:true, noiseSuppression:true }\n\t\t\t\t//普通麦克风录音时getUserMedia方法的audio配置参数，比如指定设备id，回声消除、降噪开关；注意：提供的任何配置值都不一定会生效\n\t\t\t\t//由于麦克风是全局共享的，所以新配置后需要close掉以前的再重新open\n\t\t\t\t//同样可配置videoTrackSet，更多参考: https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints\n\t\t\n\t\t//,disableEnvInFix:false 内部参数，禁用设备卡顿时音频输入丢失补偿功能\n\t\t\n\t\t//,takeoffEncodeChunk:NOOP //fn(chunkBytes) chunkBytes=[Uint8,...]：实时编码环境下接管编码器输出，当编码器实时编码出一块有效的二进制音频数据时实时回调此方法；参数为二进制的Uint8Array，就是编码出来的音频数据片段，所有的chunkBytes拼接在一起即为完整音频。本实现的想法最初由QQ2543775048提出\n\t\t\t\t//当提供此回调方法时，将接管编码器的数据输出，编码器内部将放弃存储生成的音频数据；如果当前编码器或环境不支持实时编码处理，将在open时直接走fail逻辑\n\t\t\t\t//因此提供此回调后调用stop方法将无法获得有效的音频数据，因为编码器内没有音频数据，因此stop时返回的blob将是一个字节长度为0的blob\n\t\t\t\t//大部分录音格式编码器都支持实时编码（边录边转码），比如mp3格式：会实时的将编码出来的mp3片段通过此方法回调，所有的chunkBytes拼接到一起即为完整的mp3，此种拼接的结果比mock方法实时生成的音质更加，因为天然避免了首尾的静默\n\t\t\t\t//不支持实时编码的录音格式不可以提供此回调（wav格式不支持，因为wav文件头中需要提供文件最终长度），提供了将在open时直接走fail逻辑\n\t};\n\t\n\tfor(var k in set){\n\t\to[k]=set[k];\n\t};\n\tThis.set=o;\n\t\n\tvar vB=o[bitRateTxt],vS=o[sampleRateTxt]; //校验配置参数\n\tif(vB&&!IsNum(vB) || vS&&!IsNum(vS)){\n\t\tThis.CLog($T.G(\"IllegalArgs-1\",[$T(\"VtS4::{1}和{2}必须是数值\",0,sampleRateTxt,bitRateTxt)]),1,set);\n\t};\n\to[bitRateTxt]=+vB||16;\n\to[sampleRateTxt]=+vS||16000;\n\t\n\tThis.state=0;//运行状态，0未录音 1录音中 2暂停 3等待ctx激活\n\tThis._S=9;//stop同步锁，stop可以阻止open过程中还未运行的start\n\tThis.Sync={O:9,C:9};//和Recorder.Sync一致，只不过这个是非全局的，仅用来简化代码逻辑，无实际作用\n};\n//同步锁，控制对Stream的竞争；用于close时中断异步的open；一个对象open如果变化了都要阻止close，Stream的控制权交个新的对象\nRecorder.Sync={/*open*/O:9,/*close*/C:9};\n\nRecorder.prototype=initFn.prototype={\n\tCLog:CLog\n\t\n\t//流相关的数据存储在哪个对象里面；如果提供了sourceStream，数据直接存储在当前对象中，否则存储在全局\n\t,_streamStore:function(){\n\t\tif(this.set.sourceStream){\n\t\t\treturn this;\n\t\t}else{\n\t\t\treturn Recorder;\n\t\t}\n\t}\n\t//当前实例用到的Stream，可能是全局的，也可能是独享的\n\t,_streamGet:function(){\n\t\treturn this._streamStore().Stream;\n\t}\n\t//当前实例用到的AudioContext，可能是全局的，也可能是独享的\n\t,_streamCtx:function(){\n\t\tvar m=this._streamGet();\n\t\treturn m&&m._c;\n\t}\n\t\n\t//打开录音资源True(),False(msg,isUserNotAllow)，需要调用close。注意：此方法是异步的；一般使用时打开，用完立即关闭；可重复调用，可用来测试是否能录音；open和start至少有一个应当在用户操作（触摸、点击等）下进行调用，原因参考runningContext配置\n\t,open:function(True,False){\n\t\tvar This=this,set=This.set,streamStore=This._streamStore(),newCtx=0;\n\t\tTrue=True||NOOP;\n\t\tvar failCall=function(errMsg,isUserNotAllow){\n\t\t\tisUserNotAllow=!!isUserNotAllow;\n\t\t\tThis.CLog($T(\"5tWi::录音open失败：\")+errMsg+\",isUserNotAllow:\"+isUserNotAllow,1);\n\t\t\tif(newCtx)Recorder.CloseNewCtx(newCtx);\n\t\t\tFalse&&False(errMsg,isUserNotAllow);\n\t\t};\n\t\t\n\t\tThis._streamTag=getUserMediaTxt;\n\t\tvar ok=function(){\n\t\t\tThis.CLog(\"open ok, id:\"+This.id+\" stream:\"+This._streamTag);\n\t\t\tTrue();\n\t\t\t\n\t\t\tThis._SO=0;//解除stop对open中的start调用的阻止\n\t\t};\n\t\t\n\t\t\n\t\t//同步锁\n\t\tvar Lock=streamStore.Sync;\n\t\tvar lockOpen=++Lock.O,lockClose=Lock.C;\n\t\tThis._O=This._O_=lockOpen;//记住当前的open，如果变化了要阻止close，这里假定了新对象已取代当前对象并且不再使用\n\t\tThis._SO=This._S;//记住open过程中的stop，中途任何stop调用后都不能继续open中的start\n\t\tvar lockFail=function(){\n\t\t\t//允许多次open，但不允许任何一次close，或者自身已经调用了关闭\n\t\t\tif(lockClose!=Lock.C || !This._O){\n\t\t\t\tvar err=$T(\"dFm8::open被取消\");\n\t\t\t\tif(lockOpen==Lock.O){\n\t\t\t\t\t//无新的open，已经调用了close进行取消，此处应让上次的close明确生效\n\t\t\t\t\tThis.close();\n\t\t\t\t}else{\n\t\t\t\t\terr=$T(\"VtJO::open被中断\");\n\t\t\t\t};\n\t\t\t\tfailCall(err);\n\t\t\t\treturn true;\n\t\t\t};\n\t\t};\n\t\t\n\t\t//环境配置检查\n\t\tif(!isBrowser){\n\t\t\tfailCall($T.G(\"NonBrowser-1\",[\"open\"])+$T(\"EMJq::，可尝试使用RecordApp解决方案\")+\"(\"+GitUrl+\"/tree/master/app-support-sample)\");\n\t\t\treturn;\n\t\t};\n\t\tvar checkMsg=This.envCheck({envName:\"H5\",canProcess:true});\n\t\tif(checkMsg){\n\t\t\tfailCall($T(\"A5bm::不能录音：\")+checkMsg);\n\t\t\treturn;\n\t\t};\n\t\t\n\t\t//尽量先创建好ctx，不然异步下创建可能不是running状态\n\t\tvar ctx;\n\t\tvar getCtx=function(){\n\t\t\tctx=set.runningContext;\n\t\t\tif(!ctx)ctx=newCtx=Recorder.GetContext(true); //2023-06 尽量创建新的ctx，免得Safari再次连接无回调\n\t\t};\n\t\t\n\t\t//***********已直接提供了音频流************\n\t\tif(set.sourceStream){\n\t\t\tThis._streamTag=\"set.sourceStream\";\n\t\t\tif(!Recorder.GetContext()){\n\t\t\t\tfailCall($T(\"1iU7::不支持此浏览器从流中获取录音\"));\n\t\t\t\treturn;\n\t\t\t};\n\t\t\tgetCtx();\n\t\t\t\n\t\t\tDisconnect(streamStore);//可能已open过，直接先尝试断开\n\t\t\tvar stream=This.Stream=set.sourceStream;\n\t\t\tstream._c=ctx;\n\t\t\tstream._RC=set.runningContext;\n\t\t\tstream._call={};\n\t\t\t\n\t\t\ttry{\n\t\t\t\tConnect(streamStore);\n\t\t\t}catch(e){\n\t\t\t\tDisconnect(streamStore);\n\t\t\t\tfailCall($T(\"BTW2::从流中打开录音失败：\")+e.message);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tok();\n\t\t\treturn;\n\t\t};\n\t\t\n\t\t\n\t\t//***********打开麦克风得到全局的音频流************\n\t\tvar codeFail=function(code,msg){\n\t\t\ttry{//跨域的优先检测一下\n\t\t\t\twindow.top.a;\n\t\t\t}catch(e){\n\t\t\t\tfailCall($T(\"Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})\",0,'allow=\"camera;microphone\"'));\n\t\t\t\treturn;\n\t\t\t};\n\t\t\t\n\t\t\tif(codeErr1(1,code)){\n\t\t\t\tif(/Found/i.test(code)){//可能是非安全环境导致的没有设备\n\t\t\t\t\tfailCall(msg+$T(\"jBa9::，无可用麦克风\"));\n\t\t\t\t}else{\n\t\t\t\t\tfailCall(msg);\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t\tvar codeErr1=function(call,code){ //排除几个明确原因的错误\n\t\t\tif(/Permission|Allow/i.test(code)){\n\t\t\t\tif(call) failCall($T(\"gyO5::用户拒绝了录音权限\"),true);\n\t\t\t}else if(window.isSecureContext===false){\n\t\t\t\tif(call) failCall($T(\"oWNo::浏览器禁止不安全页面录音，可开启https解决\"));\n\t\t\t}else{\n\t\t\t\treturn 1;\n\t\t\t};\n\t\t};\n\t\t\n\t\t\n\t\t//如果已打开并且有效就不要再打开了\n\t\tif(Recorder.IsOpen()){\n\t\t\tok();\n\t\t\treturn;\n\t\t};\n\t\tif(!Recorder.Support()){\n\t\t\tcodeFail(\"\",$T(\"COxc::此浏览器不支持录音\"));\n\t\t\treturn;\n\t\t};\n\t\tgetCtx();\n\t\t\n\t\t//请求权限，如果从未授权，一般浏览器会弹出权限请求弹框\n\t\tvar f1=function(stream){ //请求成功回调\n\t\t\t//https://github.com/xiangyuecn/Recorder/issues/14 获取到的track.readyState!=\"live\"，刚刚回调时可能是正常的，但过一下可能就被关掉了，原因不明。延迟一下保证真异步。对正常浏览器不影响\n\t\t\tsetTimeout(function(){\n\t\t\t\tstream._call={};\n\t\t\t\tvar oldStream=Recorder.Stream;\n\t\t\t\tif(oldStream){\n\t\t\t\t\tDisconnect(); //直接断开已存在的，旧的Connect未完成会自动终止\n\t\t\t\t\tstream._call=oldStream._call;\n\t\t\t\t};\n\t\t\t\tRecorder.Stream=stream;\n\t\t\t\tstream._c=ctx;\n\t\t\t\tstream._RC=set.runningContext;\n\t\t\t\tif(lockFail())return;\n\t\t\t\t\n\t\t\t\tif(Recorder.IsOpen()){\n\t\t\t\t\tif(oldStream)This.CLog($T(\"upb8::发现同时多次调用open\"),1);\n\t\t\t\t\t\n\t\t\t\t\tConnect(streamStore);\n\t\t\t\t\tok(); //只连接，因为AudioContext不一定在运行，无法知道是否有数据回调\n\t\t\t\t}else{\n\t\t\t\t\tfailCall($T(\"Q1GA::录音功能无效：无音频流\"));\n\t\t\t\t};\n\t\t\t},100);\n\t\t};\n\t\tvar f2=function(e){ //请求失败回调\n\t\t\tvar code=e.name||e.message||e.code+\":\"+e;\n\t\t\tvar tryMsg=\"\";\n\t\t\tif(callUmCount==1 && codeErr1(0,code)){ \n\t\t\t\ttryMsg=$T(\"KxE2::，将尝试禁用回声消除后重试\");\n\t\t\t}\n\t\t\tvar msg1=$T(\"xEQR::请求录音权限错误\"),msg2=$T(\"bDOG::无法录音：\");\n\t\t\tThis.CLog(msg1+tryMsg+\"|\"+e,(tryMsg||f2_e)?3:1,e);\n\t\t\t\n\t\t\tif(tryMsg){//重试\n\t\t\t\tf2_c=code; f2_e=e; //重试如果还出错 返回第一个错误\n\t\t\t\tcallUserMedia(1);\n\t\t\t}else if(f2_e){\n\t\t\t\tThis.CLog(msg1+\"|\"+f2_e,1,f2_e);\n\t\t\t\tcodeFail(f2_c,msg2+f2_e);\n\t\t\t}else{\n\t\t\t\tcodeFail(code,msg2+e);\n\t\t\t};\n\t\t};\n\t\t\n\t\tvar callUmCount=0,f2_c,f2_e;\n\t\tvar callUserMedia=function(retry){\n\t\t\tcallUmCount++;\n\t\t\tvar atsTxt=\"audioTrackSet\";\n\t\t\tvar t_AGC=\"autoGainControl\",t_AEC=\"echoCancellation\",t_ANS=\"noiseSuppression\";\n\t\t\tvar atsTxtJs=atsTxt+\":{\"+t_AEC+\",\"+t_ANS+\",\"+t_AGC+\"}\";\n\t\t\tvar trackSet=JSON.parse(ToJson(set[atsTxt]||true)); //true 跟 {} 兼容性？\n\t\t\tThis.CLog(\"open... \"+callUmCount+\" \"+atsTxt+\":\"+ToJson(trackSet));\n\t\t\t\n\t\t\tif(retry){ //回声消除有些浏览器可能导致无法打开录音，尝试明确禁用来保证能最基础的录\n\t\t\t\tif(typeof(trackSet)!=\"object\")trackSet={}; //默认true\n\t\t\t\ttrackSet[t_AGC]=false;\n\t\t\t\ttrackSet[t_AEC]=false;\n\t\t\t\ttrackSet[t_ANS]=false;\n\t\t\t};\n\t\t\t//这里指明采样率，虽然可以解决手机上MediaRecorder采样率16k的问题，是回声消除导致的只能获取到16k的流，禁用回声消除可恢复48k。(issues#230)而且会导致乱用音频输入设备，MediaStreamTrack的applyConstraints也无法修改采样率\n\t\t\t//trackSet[sampleRateTxt]=ctx[sampleRateTxt];\n\t\t\tif(trackSet[sampleRateTxt]){\n\t\t\t\tThis.CLog($T(\"IjL3::注意：已配置{1}参数，可能会出现浏览器不能正确选用麦克风、移动端无法启用回声消除等现象\",0,atsTxt+\".\"+sampleRateTxt),3);\n\t\t\t};\n\t\t\t\n\t\t\tvar mSet={audio:trackSet, video:set.videoTrackSet||false};\n\t\t\ttry{\n\t\t\t\tvar pro=Recorder.Scope[getUserMediaTxt](mSet,f1,f2);\n\t\t\t}catch(e){//不能设置trackSet就算了\n\t\t\t\tThis.CLog(getUserMediaTxt,3,e);\n\t\t\t\tmSet={audio:true, video:false};\n\t\t\t\tpro=Recorder.Scope[getUserMediaTxt](mSet,f1,f2);\n\t\t\t};\n\t\t\tThis.CLog(getUserMediaTxt+\"(\"+ToJson(mSet)+\") \"+CtxState(ctx)\n\t\t\t\t+$T(\"RiWe::，未配置 {1} 时浏览器可能会自动启用回声消除，移动端未禁用回声消除时可能会降低系统播放音量（关闭录音后可恢复）和仅提供16k采样率的音频流（不需要回声消除时可明确配置成禁用来获得48k高音质的流），请参阅文档中{2}配置\",0,atsTxtJs,atsTxt)\n\t\t\t\t+\"(\"+GitUrl+\") LM:\"+LM+\" UA:\"+navigator.userAgent);\n\t\t\tif(pro&&pro.then){\n\t\t\t\tpro.then(f1)[CatchTxt](f2); //fix 关键字，保证catch压缩时保持字符串形式\n\t\t\t};\n\t\t};\n\t\tcallUserMedia();\n\t}\n\t//关闭释放录音资源\n\t,close:function(call){\n\t\tcall=call||NOOP;\n\t\t\n\t\tvar This=this,streamStore=This._streamStore();\n\t\tThis._stop();\n\t\tvar sTag=\" stream:\"+This._streamTag;\n\t\t\n\t\tvar Lock=streamStore.Sync;\n\t\tThis._O=0;\n\t\tif(This._O_!=Lock.O){\n\t\t\t//唯一资源Stream的控制权已交给新对象，这里不能关闭。此处在每次都弹权限的浏览器内可能存在泄漏，新对象被拒绝权限可能不会调用close，忽略这种不处理\n\t\t\tThis.CLog($T(\"hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）\")+sTag,3);\n\t\t\tcall();\n\t\t\treturn;\n\t\t};\n\t\tLock.C++;//获得控制权\n\t\t\n\t\tDisconnect(streamStore);\n\t\t\n\t\tThis.CLog(\"close,\"+sTag);\n\t\tcall();\n\t}\n\t\n\t\n\t\n\t\n\t\n\t/*模拟一段录音数据，后面可以调用stop进行编码，需提供pcm数据[1,2,3...]，pcm的采样率*/\n\t,mock:function(pcmData,pcmSampleRate){\n\t\tvar This=this;\n\t\tThis._stop();//清理掉已有的资源\n\t\t\n\t\tThis.isMock=1;\n\t\tThis.mockEnvInfo=null;\n\t\tThis.buffers=[pcmData];\n\t\tThis.recSize=pcmData.length;\n\t\tThis._setSrcSR(pcmSampleRate);\n\t\tThis._streamTag=\"mock\";\n\t\treturn This;\n\t}\n\t,_setSrcSR:function(sampleRate){\n\t\tvar This=this,set=This.set;\n\t\tvar setSr=set[sampleRateTxt];\n\t\tif(setSr>sampleRate){\n\t\t\tset[sampleRateTxt]=sampleRate;\n\t\t}else{ setSr=0 }\n\t\tThis[srcSampleRateTxt]=sampleRate;\n\t\tThis.CLog(srcSampleRateTxt+\": \"+sampleRate+\" set.\"+sampleRateTxt+\": \"+set[sampleRateTxt]+(setSr?\" \"+$T(\"UHvm::忽略\")+\": \"+setSr:\"\"), setSr?3:0);\n\t}\n\t,envCheck:function(envInfo){//平台环境下的可用性检查，任何时候都可以调用检查，返回errMsg:\"\"正常，\"失败原因\"\n\t\t//envInfo={envName:\"H5\",canProcess:true}\n\t\tvar errMsg,This=this,set=This.set;\n\t\t\n\t\t//检测CPU的数字字节序，TypedArray字节序是个迷，直接拒绝罕见的大端模式，因为找不到这种CPU进行测试\n\t\tvar tag=\"CPU_BE\";\n\t\tif(!errMsg && !Recorder[tag] && typeof Int8Array==\"function\" && !new Int8Array(new Int32Array([1]).buffer)[0]){\n\t\t\tTraffic(tag); //如果开启了流量统计，这里将发送一个图片请求\n\t\t\terrMsg=$T(\"Essp::不支持{1}架构\",0,tag);\n\t\t};\n\t\t\n\t\t//编码器检查环境下配置是否可用\n\t\tif(!errMsg){\n\t\t\tvar type=set.type,hasFn=This[type+\"_envCheck\"];\n\t\t\tif(set.takeoffEncodeChunk){//需要实时编码返回数据，此时需要检查环境是否有实时特性、和是否可实时编码\n\t\t\t\tif(!hasFn){\n\t\t\t\t\terrMsg=$T(\"2XBl::{1}类型不支持设置takeoffEncodeChunk\",0,type)+(This[type]?\"\":$T(\"LG7e::(未加载编码器)\"));\n\t\t\t\t}else if(!envInfo.canProcess){\n\t\t\t\t\terrMsg=$T(\"7uMV::{1}环境不支持实时处理\",0,envInfo.envName);\n\t\t\t\t};\n\t\t\t};\n\t\t\t\n\t\t\tif(!errMsg && hasFn){//编码器已实现环境检查\n\t\t\t\terrMsg=This[type+\"_envCheck\"](envInfo,set);\n\t\t\t};\n\t\t};\n\t\t\n\t\treturn errMsg||\"\";\n\t}\n\t,envStart:function(mockEnvInfo,sampleRate){//平台环境相关的start调用\n\t\tvar This=this,set=This.set;\n\t\tThis.isMock=mockEnvInfo?1:0;//非H5环境需要启用mock，并提供envCheck需要的环境信息\n\t\tThis.mockEnvInfo=mockEnvInfo;\n\t\tThis.buffers=[];//数据缓冲\n\t\tThis.recSize=0;//数据大小\n\t\tif(mockEnvInfo){\n\t\t\tThis._streamTag=\"env$\"+mockEnvInfo.envName;\n\t\t};\n\t\t\n\t\tThis.state=1;//运行状态，0未录音 1录音中 2暂停 3等待ctx激活\n\t\tThis.envInLast=0;//envIn接收到最后录音内容的时间\n\t\tThis.envInFirst=0;//envIn接收到的首个录音内容的录制时间\n\t\tThis.envInFix=0;//补偿的总时间\n\t\tThis.envInFixTs=[];//补偿计数列表\n\t\t\n\t\t//engineCtx需要提前确定最终的采样率\n\t\tThis._setSrcSR(sampleRate);\n\t\t\n\t\tThis.engineCtx=0;\n\t\t//此类型有边录边转码(Worker)支持\n\t\tif(This[set.type+\"_start\"]){\n\t\t\tvar engineCtx=This.engineCtx=This[set.type+\"_start\"](set);\n\t\t\tif(engineCtx){\n\t\t\t\tengineCtx.pcmDatas=[];\n\t\t\t\tengineCtx.pcmSize=0;\n\t\t\t};\n\t\t};\n\t}\n\t,envResume:function(){//和平台环境无关的恢复录音\n\t\t//重新开始计数\n\t\tthis.envInFixTs=[];\n\t}\n\t,envIn:function(pcm,sum){//和平台环境无关的pcm[Int16]输入\n\t\tvar This=this,set=This.set,engineCtx=This.engineCtx;\n\t\tif(This.state!=1){\n\t\t\tif(!This.state)This.CLog(\"envIn at state=0\",3);\n\t\t\treturn;\n\t\t};\n\t\tvar bufferSampleRate=This[srcSampleRateTxt];\n\t\tvar size=pcm.length;\n\t\tvar powerLevel=Recorder.PowerLevel(sum,size);\n\t\t\n\t\tvar buffers=This.buffers;\n\t\tvar bufferFirstIdx=buffers.length;//之前的buffer都是经过onProcess处理好的，不允许再修改\n\t\tbuffers.push(pcm);\n\t\t\n\t\t//有engineCtx时会被覆盖，这里保存一份\n\t\tvar buffersThis=buffers;\n\t\tvar bufferFirstIdxThis=bufferFirstIdx;\n\t\t\n\t\t//卡顿丢失补偿：因为设备很卡的时候导致H5接收到的数据量不够造成播放时候变速，结果比实际的时长要短，此处保证了不会变短，但不能修复丢失的音频数据造成音质变差。当前算法采用输入时间侦测下一帧是否需要添加补偿帧，需要(6次输入||超过1秒)以上才会开始侦测，如果滑动窗口内丢失超过1/3就会进行补偿\n\t\tvar now=Date.now();\n\t\tvar pcmTime=Math.round(size/bufferSampleRate*1000);\n\t\tThis.envInLast=now;\n\t\tif(This.buffers.length==1){//记下首个录音数据的录制时间\n\t\t\tThis.envInFirst=now-pcmTime;\n\t\t};\n\t\tvar envInFixTs=This.envInFixTs;\n\t\tenvInFixTs.splice(0,0,{t:now,d:pcmTime});\n\t\t//保留3秒的计数滑动窗口，另外超过3秒的停顿不补偿\n\t\tvar tsInStart=now,tsPcm=0;\n\t\tfor(var i=0;i<envInFixTs.length;i++){\n\t\t\tvar o=envInFixTs[i];\n\t\t\tif(now-o.t>3000){\n\t\t\t\tenvInFixTs.length=i;\n\t\t\t\tbreak;\n\t\t\t};\n\t\t\ttsInStart=o.t;\n\t\t\ttsPcm+=o.d;\n\t\t};\n\t\t//达到需要的数据量，开始侦测是否需要补偿\n\t\tvar tsInPrev=envInFixTs[1];\n\t\tvar tsIn=now-tsInStart;\n\t\tvar lost=tsIn-tsPcm;\n\t\tif( lost>tsIn/3 && (tsInPrev&&tsIn>1000 || envInFixTs.length>=6) ){\n\t\t\t//丢失过多，开始执行补偿\n\t\t\tvar addTime=now-tsInPrev.t-pcmTime;//距离上次输入丢失这么多ms\n\t\t\tif(addTime>pcmTime/5){//丢失超过本帧的1/5\n\t\t\t\tvar fixOpen=!set.disableEnvInFix;\n\t\t\t\tThis.CLog(\"[\"+now+\"]\"+i18n.get(fixOpen?$T(\"4Kfd::补偿{1}ms\",1):$T(\"bM5i::未补偿{1}ms\",1),[addTime]),3);\n\t\t\t\tThis.envInFix+=addTime;\n\t\t\t\t\n\t\t\t\t//用静默进行补偿\n\t\t\t\tif(fixOpen){\n\t\t\t\t\tvar addPcm=new Int16Array(addTime*bufferSampleRate/1000);\n\t\t\t\t\tsize+=addPcm.length;\n\t\t\t\t\tbuffers.push(addPcm);\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t\t\n\t\t\n\t\tvar sizeOld=This.recSize,addSize=size;\n\t\tvar bufferSize=sizeOld+addSize;\n\t\tThis.recSize=bufferSize;//此值在onProcess后需要修正，可能新数据被修改\n\t\t\n\t\t\n\t\t//此类型有边录边转码(Worker)支持，开启实时转码\n\t\tif(engineCtx){\n\t\t\t//转换成set的采样率\n\t\t\tvar chunkInfo=Recorder.SampleData(buffers,bufferSampleRate,set[sampleRateTxt],engineCtx.chunkInfo);\n\t\t\tengineCtx.chunkInfo=chunkInfo;\n\t\t\t\n\t\t\tsizeOld=engineCtx.pcmSize;\n\t\t\taddSize=chunkInfo.data.length;\n\t\t\tbufferSize=sizeOld+addSize;\n\t\t\tengineCtx.pcmSize=bufferSize;//此值在onProcess后需要修正，可能新数据被修改\n\t\t\t\n\t\t\tbuffers=engineCtx.pcmDatas;\n\t\t\tbufferFirstIdx=buffers.length;\n\t\t\tbuffers.push(chunkInfo.data);\n\t\t\tbufferSampleRate=chunkInfo[sampleRateTxt];\n\t\t};\n\t\t\n\t\tvar duration=Math.round(bufferSize/bufferSampleRate*1000);\n\t\tvar bufferNextIdx=buffers.length;\n\t\tvar bufferNextIdxThis=buffersThis.length;\n\t\t\n\t\t//允许异步处理buffer数据\n\t\tvar asyncEnd=function(){\n\t\t\t//重新计算size，异步的早已减去添加的，同步的需去掉本次添加的然后重新计算\n\t\t\tvar num=asyncBegin?0:-addSize;\n\t\t\tvar hasClear=buffers[0]==null;\n\t\t\tfor(var i=bufferFirstIdx;i<bufferNextIdx;i++){\n\t\t\t\tvar buffer=buffers[i];\n\t\t\t\tif(buffer==null){//已被主动释放内存，比如长时间实时传输录音时\n\t\t\t\t\thasClear=1;\n\t\t\t\t}else{\n\t\t\t\t\tnum+=buffer.length;\n\t\t\t\t\t\n\t\t\t\t\t//推入后台边录边转码\n\t\t\t\t\tif(engineCtx&&buffer.length){\n\t\t\t\t\t\tThis[set.type+\"_encode\"](engineCtx,buffer);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\t\t\t\n\t\t\t//同步清理This.buffers，不管buffers到底清了多少个，buffersThis是使用不到的进行全清\n\t\t\tif(hasClear && engineCtx){\n\t\t\t\tvar i=bufferFirstIdxThis;\n\t\t\t\tif(buffersThis[0]){\n\t\t\t\t\ti=0;\n\t\t\t\t};\n\t\t\t\tfor(;i<bufferNextIdxThis;i++){\n\t\t\t\t\tbuffersThis[i]=null;\n\t\t\t\t};\n\t\t\t};\n\t\t\t\n\t\t\t//统计修改后的size，如果异步发生clear要原样加回来，同步的无需操作\n\t\t\tif(hasClear){\n\t\t\t\tnum=asyncBegin?addSize:0;\n\t\t\t\t\n\t\t\t\tbuffers[0]=null;//彻底被清理\n\t\t\t};\n\t\t\tif(engineCtx){\n\t\t\t\tengineCtx.pcmSize+=num;\n\t\t\t}else{\n\t\t\t\tThis.recSize+=num;\n\t\t\t};\n\t\t};\n\t\t//实时回调处理数据，允许修改或替换上次回调以来新增的数据 ，但是不允许修改已处理过的，不允许增删第一维数组 ，允许将第二维数组任意修改替换成空数组也可以\n\t\tvar asyncBegin=0,procTxt=\"rec.set.onProcess\";\n\t\ttry{\n\t\t\tasyncBegin=set.onProcess(buffers,powerLevel,duration,bufferSampleRate,bufferFirstIdx,asyncEnd);\n\t\t\tasyncBegin=asyncBegin===true;\n\t\t}catch(e){\n\t\t\t//此错误显示不要用CLog，这样控制台内相同内容不会重复打印\n\t\t\tconsole.error(procTxt+$T(\"gFUF::回调出错是不允许的，需保证不会抛异常\"),e);\n\t\t};\n\t\t\n\t\tvar slowT=Date.now()-now;\n\t\tif(slowT>10 && This.envInFirst-now>1000){ //1秒后开始onProcess性能监测\n\t\t\tThis.CLog(procTxt+$T(\"2ghS::低性能，耗时{1}ms\",0,slowT),3);\n\t\t};\n\t\t\n\t\tif(asyncBegin){\n\t\t\t//开启了异步模式，onProcess已接管buffers新数据，立即清空，避免出现未处理的数据\n\t\t\tvar hasClear=0;\n\t\t\tfor(var i=bufferFirstIdx;i<bufferNextIdx;i++){\n\t\t\t\tif(buffers[i]==null){//已被主动释放内存，比如长时间实时传输录音时 ，但又要开启异步模式，此种情况是非法的\n\t\t\t\t\thasClear=1;\n\t\t\t\t}else{\n\t\t\t\t\tbuffers[i]=new Int16Array(0);\n\t\t\t\t};\n\t\t\t};\n\t\t\t\n\t\t\tif(hasClear){\n\t\t\t\tThis.CLog($T(\"ufqH::未进入异步前不能清除buffers\"),3);\n\t\t\t}else{\n\t\t\t\t//还原size，异步结束后再统计仅修改后的size，如果发生clear要原样加回来\n\t\t\t\tif(engineCtx){\n\t\t\t\t\tengineCtx.pcmSize-=addSize;\n\t\t\t\t}else{\n\t\t\t\t\tThis.recSize-=addSize;\n\t\t\t\t};\n\t\t\t};\n\t\t}else{\n\t\t\tasyncEnd();\n\t\t};\n\t}\n\t\n\t\n\t\n\t\n\t//开始录音，需先调用open；只要open成功时，调用此方法是安全的，如果未open强行调用导致的内部错误将不会有任何提示，stop时自然能得到错误；注意：open和start至少有一个应当在用户操作（触摸、点击等）下进行调用，原因参考runningContext配置\n\t,start:function(){\n\t\tvar This=this;\n\t\t\n\t\tvar isOpen=1;\n\t\tif(This.set.sourceStream){//直接提供了流，仅判断是否调用了open\n\t\t\tif(!This.Stream){\n\t\t\t\tisOpen=0;\n\t\t\t}\n\t\t}else if(!Recorder.IsOpen()){//监测全局麦克风是否打开并且有效\n\t\t\tisOpen=0;\n\t\t};\n\t\tif(!isOpen){\n\t\t\tThis.CLog($T(\"6WmN::start失败：未open\"),1);\n\t\t\treturn;\n\t\t};\n\t\tvar ctx=This._streamCtx();\n\t\tThis.CLog($T(\"kLDN::start 开始录音，\")+CtxState(ctx)+\" stream:\"+This._streamTag);\n\t\t\n\t\tThis._stop();\n\t\tThis.envStart(null, ctx[sampleRateTxt]);\n\t\tThis.state=3;//0未录音 1录音中 2暂停 3等待ctx激活\n\t\t\n\t\t//检查open过程中stop是否已经调用过\n\t\tif(This._SO&&This._SO+1!=This._S){//上面调用过一次 _stop\n\t\t\t//open未完成就调用了stop，此种情况终止start。也应尽量避免出现此情况\n\t\t\tThis.CLog($T(\"Bp2y::start被中断\"),3);\n\t\t\treturn;\n\t\t};\n\t\tThis._SO=0;\n\t\t\n\t\tvar end=function(){\n\t\t\tif(This.state==3){\n\t\t\t\tThis.state=1;\n\t\t\t\tThis.resume();\n\t\t\t}\n\t\t};\n\t\tvar tag=\"AudioContext resume: \";\n\t\t\n\t\t//如果有数据回调，就不等待ctx resume\n\t\tvar stream=This._streamGet();\n\t\tstream._call[This.id]=function(){\n\t\t\tThis.CLog(tag+ctx.state+'|stream ok');\n\t\t\tend();\n\t\t};\n\t\tResumeCtx(ctx,function(runC){\n\t\t\trunC&&This.CLog(tag+\"wait...\");\n\t\t\treturn This.state==3;\n\t\t},function(runC){\n\t\t\trunC&&This.CLog(tag+ctx.state);\n\t\t\tend();\n\t\t},function(err){ //比较少见，可能对录音没有影响\n\t\t\tThis.CLog(tag+ctx.state+$T(\"upkE::，可能无法录音：\")+err,1);\n\t\t\tend();\n\t\t});\n\t}\n\t\n\t\n\t\n\t/*暂停录音*/\n\t,pause:function(){\n\t\tvar This=this,stream=This._streamGet();\n\t\tif(This.state){\n\t\t\tThis.state=2;\n\t\t\tThis.CLog(\"pause\");\n\t\t\tif(stream) delete stream._call[This.id];\n\t\t};\n\t}\n\t/*恢复录音*/\n\t,resume:function(){\n\t\tvar This=this,stream=This._streamGet();\n\t\tvar tag=\"resume\",tag3=tag+\"(wait ctx)\";\n\t\tif(This.state==3){ //start还在等ctx恢复\n\t\t\tThis.CLog(tag3);\n\t\t}else if(This.state){\n\t\t\tThis.state=1;\n\t\t\tThis.CLog(tag);\n\t\t\tThis.envResume();\n\t\t\t\n\t\t\tif(stream){\n\t\t\t\tstream._call[This.id]=function(pcm,sum){\n\t\t\t\t\tif(This.state==1){\n\t\t\t\t\t\tThis.envIn(pcm,sum);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t\tConnAlive(stream);//AudioWorklet只会在ctx激活后运行\n\t\t\t};\n\t\t\t\n\t\t\tvar ctx=This._streamCtx();\n\t\t\tif(ctx){ //AudioContext如果被暂停，尽量恢复\n\t\t\t\tResumeCtx(ctx,function(runC){\n\t\t\t\t\trunC&&This.CLog(tag3+\"...\");\n\t\t\t\t\treturn This.state==1;\n\t\t\t\t},function(runC){\n\t\t\t\t\trunC&&This.CLog(tag3+ctx.state);\n\t\t\t\t\tConnAlive(stream);\n\t\t\t\t},function(err){\n\t\t\t\t\tThis.CLog(tag3+ctx.state+\"[err]\"+err,1);\n\t\t\t\t});\n\t\t\t};\n\t\t};\n\t}\n\t\n\t\n\t\n\t\n\t,_stop:function(keepEngine){\n\t\tvar This=this,set=This.set;\n\t\tif(!This.isMock){\n\t\t\tThis._S++;\n\t\t};\n\t\tif(This.state){\n\t\t\tThis.pause();\n\t\t\tThis.state=0;\n\t\t};\n\t\tif(!keepEngine && This[set.type+\"_stop\"]){\n\t\t\tThis[set.type+\"_stop\"](This.engineCtx);\n\t\t\tThis.engineCtx=0;\n\t\t};\n\t}\n\t/*\n\t结束录音并返回录音数据blob对象\n\t\tTrue(blob,duration,mime)\n\t\t\tblob：录音数据audio/mp3|wav格式；默认是Blob对象，可设置rec.dataType=\"arraybuffer\"改成ArrayBuffer\n\t\t\tduration：录音时长，单位毫秒\n\t\t\tmime：\"auido/mp3\" blob数据的类型，方便ArrayBuffer时区分类型\n\t\tFalse(msg)\n\t\tautoClose:false 可选，是否自动调用close，默认为false\n\t*/\n\t,stop:function(True,False,autoClose){\n\t\tvar This=this,set=This.set,t1;\n\t\tvar envInMS=This.envInLast-This.envInFirst, envInLen=envInMS&&This.buffers.length; //可能未start\n\t\tThis.CLog($T(\"Xq4s::stop 和start时差:\")\n\t\t\t+(envInMS?envInMS+\"ms \"+$T(\"3CQP::补偿:\")+This.envInFix+\"ms\"\n\t\t\t\t+\" envIn:\"+envInLen+\" fps:\"+(envInLen/envInMS*1000).toFixed(1)\n\t\t\t:\"-\")+\" stream:\"+This._streamTag+\" (\"+GitUrl+\") LM:\"+LM);\n\t\t\n\t\tvar end=function(){\n\t\t\tThis._stop();//彻底关掉engineCtx\n\t\t\tif(autoClose){\n\t\t\t\tThis.close();\n\t\t\t};\n\t\t};\n\t\tvar err=function(msg){\n\t\t\tThis.CLog($T(\"u8JG::结束录音失败：\")+msg,1);\n\t\t\tFalse&&False(msg);\n\t\t\tend();\n\t\t};\n\t\tvar ok=function(blob,mime,duration){\n\t\t\tvar tBlob=\"blob\",tABuf=\"arraybuffer\",tDT=\"dataType\",tDDT=\"DefaultDataType\";\n\t\t\tvar dType=This[tDT]||Recorder[tDDT]||tBlob,dTag=tDT+\"=\"+dType;\n\t\t\tvar isAB=blob instanceof ArrayBuffer,dErr=0;\n\t\t\tvar dLen=isAB?blob.byteLength:blob.size;\n\t\t\tif(dType==tABuf){\n\t\t\t\tif(!isAB) dErr=1;\n\t\t\t}else if(dType==tBlob){\n\t\t\t\tif(typeof Blob!=\"function\"){\n\t\t\t\t\tdErr=$T.G(\"NonBrowser-1\",[dTag])+$T(\"1skY::，请设置{1}\",0,RecTxt+\".\"+tDDT+'=\"'+tABuf+'\"');\n\t\t\t\t}else{\n\t\t\t\t\tif(isAB) blob=new Blob([blob],{type:mime});\n\t\t\t\t\tif(!(blob instanceof Blob)) dErr=1;\n\t\t\t\t\tmime=blob.type||mime;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tdErr=$T.G(\"NotSupport-1\",[dTag]);\n\t\t\t};\n\t\t\t\n\t\t\tThis.CLog($T(\"Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b\",0,Date.now()-t1,duration,dLen)+\" \"+dTag+\",\"+mime);\n\t\t\tif(dErr){\n\t\t\t\terr(dErr!=1?dErr:$T(\"Vkbd::{1}编码器返回的不是{2}\",0,set.type,dType)+\", \"+dTag);\n\t\t\t\treturn;\n\t\t\t};\n\t\t\tif(set.takeoffEncodeChunk){//接管了输出，此时blob长度为0\n\t\t\t\tThis.CLog($T(\"QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据\"),3);\n\t\t\t}else if(dLen<Math.max(50,duration/5)){//1秒小于0.2k？\n\t\t\t\terr($T(\"Sz2H::生成的{1}无效\",0,set.type));\n\t\t\t\treturn;\n\t\t\t};\n\t\t\t\n\t\t\tTrue&&True(blob,duration,mime);\n\t\t\tend();\n\t\t};\n\t\tif(!This.isMock){\n\t\t\tvar isCtxWait=This.state==3;\n\t\t\tif(!This.state || isCtxWait){\n\t\t\t\terr($T(\"wf9t::未开始录音\")+(isCtxWait?$T(\"Dl2c::，开始录音前无用户交互导致AudioContext未运行\"):\"\"));\n\t\t\t\treturn;\n\t\t\t};\n\t\t};\n\t\tThis._stop(true); //将录音状态改成未录音\n\t\tvar size=This.recSize;\n\t\tif(!size){\n\t\t\terr($T(\"Ltz3::未采集到录音\"));\n\t\t\treturn;\n\t\t};\n\t\tif(!This[set.type]){\n\t\t\terr($T(\"xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载\",0,set.type,RecTxt));\n\t\t\treturn;\n\t\t};\n\t\t\n\t\t//环境配置检查，此处仅针对mock调用，因为open已经检查过了\n\t\tif(This.isMock){\n\t\t\tvar checkMsg=This.envCheck(This.mockEnvInfo||{envName:\"mock\",canProcess:false});//没有提供环境信息的mock时没有onProcess回调\n\t\t\tif(checkMsg){\n\t\t\t\terr($T(\"AxOH::录音错误：\")+checkMsg);\n\t\t\t\treturn;\n\t\t\t};\n\t\t};\n\t\t\n\t\t//此类型有边录边转码(Worker)支持\n\t\tvar engineCtx=This.engineCtx;\n\t\tif(This[set.type+\"_complete\"]&&engineCtx){\n\t\t\tvar duration=Math.round(engineCtx.pcmSize/set[sampleRateTxt]*1000);//采用后的数据长度和buffers的长度可能微小的不一致，是采样率连续转换的精度问题\n\t\t\t\n\t\t\tt1=Date.now();\n\t\t\tThis[set.type+\"_complete\"](engineCtx,function(blob,mime){\n\t\t\t\tok(blob,mime,duration);\n\t\t\t},err);\n\t\t\treturn;\n\t\t};\n\t\t\n\t\t//标准UI线程转码，调整采样率\n\t\tt1=Date.now();\n\t\tif(!This.buffers[0]){\n\t\t\terr($T(\"xkKd::音频buffers被释放\"));\n\t\t\treturn;\n\t\t};\n\t\tvar chunk=Recorder.SampleData(This.buffers,This[srcSampleRateTxt],set[sampleRateTxt]);\n\t\t\n\t\tset[sampleRateTxt]=chunk[sampleRateTxt];\n\t\tvar res=chunk.data;\n\t\tvar duration=Math.round(res.length/set[sampleRateTxt]*1000);\n\t\t\n\t\tThis.CLog($T(\"CxeT::采样:{1} 花:{2}ms\",0,size+\"->\"+res.length,Date.now()-t1));\n\t\t\n\t\tsetTimeout(function(){\n\t\t\tt1=Date.now();\n\t\t\tThis[set.type](res,function(blob,mime){\n\t\t\t\tok(blob,mime,duration);\n\t\t\t},function(msg){\n\t\t\t\terr(msg);\n\t\t\t});\n\t\t});\n\t}\n\n};\n\n\n\n\n\n//=======从WebM字节流中提取pcm数据，提取成功返回Float32Array，失败返回null||-1=====\nvar WebM_Extract=function(inBytes, scope){\n\tif(!scope.pos){\n\t\tscope.pos=[0]; scope.tracks={}; scope.bytes=[];\n\t};\n\tvar tracks=scope.tracks, position=[scope.pos[0]];\n\tvar endPos=function(){ scope.pos[0]=position[0] };\n\t\n\tvar sBL=scope.bytes.length;\n\tvar bytes=new Uint8Array(sBL+inBytes.length);\n\tbytes.set(scope.bytes); bytes.set(inBytes,sBL);\n\tscope.bytes=bytes;\n\t\n\t//先读取文件头和Track信息\n\tif(!scope._ht){\n\t\treadMatroskaVInt(bytes, position);//EBML Header\n\t\treadMatroskaBlock(bytes, position);//跳过EBML Header内容\n\t\tif(!BytesEq(readMatroskaVInt(bytes, position), [0x18,0x53,0x80,0x67])){\n\t\t\treturn;//未识别到Segment\n\t\t}\n\t\treadMatroskaVInt(bytes, position);//跳过Segment长度值\n\t\twhile(position[0]<bytes.length){\n\t\t\tvar eid0=readMatroskaVInt(bytes, position);\n\t\t\tvar bytes0=readMatroskaBlock(bytes, position);\n\t\t\tvar pos0=[0],audioIdx=0;\n\t\t\tif(!bytes0)return;//数据不全，等待缓冲\n\t\t\t//Track完整数据，循环读取TrackEntry\n\t\t\tif(BytesEq(eid0, [0x16,0x54,0xAE,0x6B])){\n\t\t\t\twhile(pos0[0]<bytes0.length){\n\t\t\t\t\tvar eid1=readMatroskaVInt(bytes0, pos0);\n\t\t\t\t\tvar bytes1=readMatroskaBlock(bytes0, pos0);\n\t\t\t\t\tvar pos1=[0],track={channels:0,sampleRate:0};\n\t\t\t\t\tif(BytesEq(eid1, [0xAE])){//TrackEntry\n\t\t\t\t\t\twhile(pos1[0]<bytes1.length){\n\t\t\t\t\t\t\tvar eid2=readMatroskaVInt(bytes1, pos1);\n\t\t\t\t\t\t\tvar bytes2=readMatroskaBlock(bytes1, pos1);\n\t\t\t\t\t\t\tvar pos2=[0];\n\t\t\t\t\t\t\tif(BytesEq(eid2, [0xD7])){//Track Number\n\t\t\t\t\t\t\t\tvar val=BytesInt(bytes2);\n\t\t\t\t\t\t\t\ttrack.number=val;\n\t\t\t\t\t\t\t\ttracks[val]=track;\n\t\t\t\t\t\t\t}else if(BytesEq(eid2, [0x83])){//Track Type\n\t\t\t\t\t\t\t\tvar val=BytesInt(bytes2);\n\t\t\t\t\t\t\t\tif(val==1) track.type=\"video\";\n\t\t\t\t\t\t\t\telse if(val==2) {\n\t\t\t\t\t\t\t\t\ttrack.type=\"audio\";\n\t\t\t\t\t\t\t\t\tif(!audioIdx) scope.track0=track;\n\t\t\t\t\t\t\t\t\ttrack.idx=audioIdx++;\n\t\t\t\t\t\t\t\t}else track.type=\"Type-\"+val;\n\t\t\t\t\t\t\t}else if(BytesEq(eid2, [0x86])){//Track Codec\n\t\t\t\t\t\t\t\tvar str=\"\";\n\t\t\t\t\t\t\t\tfor(var i=0;i<bytes2.length;i++){\n\t\t\t\t\t\t\t\t\tstr+=String.fromCharCode(bytes2[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttrack.codec=str;\n\t\t\t\t\t\t\t}else if(BytesEq(eid2, [0xE1])){\n\t\t\t\t\t\t\t\twhile(pos2[0]<bytes2.length){//循环读取 Audio 属性\n\t\t\t\t\t\t\t\t\tvar eid3=readMatroskaVInt(bytes2, pos2);\n\t\t\t\t\t\t\t\t\tvar bytes3=readMatroskaBlock(bytes2, pos2);\n\t\t\t\t\t\t\t\t\t//采样率、位数、声道数\n\t\t\t\t\t\t\t\t\tif(BytesEq(eid3, [0xB5])){\n\t\t\t\t\t\t\t\t\t\tvar val=0,arr=new Uint8Array(bytes3.reverse()).buffer;\n\t\t\t\t\t\t\t\t\t\tif(bytes3.length==4) val=new Float32Array(arr)[0];\n\t\t\t\t\t\t\t\t\t\telse if(bytes3.length==8) val=new Float64Array(arr)[0];\n\t\t\t\t\t\t\t\t\t\telse CLog(\"WebM Track !Float\",1,bytes3);\n\t\t\t\t\t\t\t\t\t\ttrack[sampleRateTxt]=Math.round(val);\n\t\t\t\t\t\t\t\t\t}else if(BytesEq(eid3, [0x62,0x64])) track.bitDepth=BytesInt(bytes3);\n\t\t\t\t\t\t\t\t\telse if(BytesEq(eid3, [0x9F])) track.channels=BytesInt(bytes3);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tscope._ht=1;\n\t\t\t\tCLog(\"WebM Tracks\",tracks);\n\t\t\t\tendPos();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//校验音频参数信息，如果不符合代码要求，统统拒绝处理\n\tvar track0=scope.track0;\n\tif(!track0)return;\n\tvar trackSR=track0[sampleRateTxt]; scope.webmSR=trackSR;\n\tif(track0.bitDepth==16 && /FLOAT/i.test(track0.codec)){\n\t\ttrack0.bitDepth=32; //chrome v66 实际为浮点数\n\t\tCLog(\"WebM 16->32 bit\",3);\n\t}\n\tif(trackSR<8000 || track0.bitDepth!=32 || track0.channels<1 || !/(\\b|_)PCM\\b/i.test(track0.codec)){\n\t\tscope.bytes=[];//格式非预期 无法处理，清空缓冲数据\n\t\tif(!scope.bad)CLog(\"WebM Track Unexpected\",3,scope);\n\t\tscope.bad=1;\n\t\treturn -1;\n\t}\n\t\n\t//循环读取Cluster内的SimpleBlock\n\tvar datas=[],dataLen=0;\n\twhile(position[0]<bytes.length){\n\t\tvar eid1=readMatroskaVInt(bytes, position);\n\t\tvar bytes1=readMatroskaBlock(bytes, position);\n\t\tif(!bytes1)break;//数据不全，等待缓冲\n\t\tif(BytesEq(eid1, [0xA3])){//SimpleBlock完整数据\n\t\t\tvar trackNo=bytes1[0]&0xf;\n\t\t\tvar track=tracks[trackNo];\n\t\t\tif(!track){//不可能没有，数据出错？\n\t\t\t\tCLog(\"WebM !Track\"+trackNo,1,tracks);\n\t\t\t\treturn -1; //可能无法继续\n\t\t\t}else if(track.idx===0){\n\t\t\t\tvar u8arr=new Uint8Array(bytes1.length-4);\n\t\t\t\tfor(var i=4;i<bytes1.length;i++){\n\t\t\t\t\tu8arr[i-4]=bytes1[i];\n\t\t\t\t}\n\t\t\t\tdatas.push(u8arr); dataLen+=u8arr.length;\n\t\t\t}\n\t\t}\n\t\tendPos();\n\t}\n\t\n\tif(dataLen){\n\t\tvar more=new Uint8Array(bytes.length-scope.pos[0]);\n\t\tmore.set(bytes.subarray(scope.pos[0]));\n\t\tscope.bytes=more; //清理已读取了的缓冲数据\n\t\tscope.pos[0]=0;\n\t\t\n\t\tvar u8arr=new Uint8Array(dataLen); //已获取的音频数据\n\t\tfor(var i=0,i2=0;i<datas.length;i++){\n\t\t\tu8arr.set(datas[i],i2);\n\t\t\ti2+=datas[i].length;\n\t\t}\n\t\tvar arr=new Float32Array(u8arr.buffer);\n\t\t\n\t\tif(track0.channels>1){//多声道，提取一个声道\n\t\t\tvar arr2=[];\n\t\t\tfor(var i=0;i<arr.length;){\n\t\t\t\tarr2.push(arr[i]);\n\t\t\t\ti+=track0.channels;\n\t\t\t}\n\t\t\tarr=new Float32Array(arr2);\n\t\t};\n\t\treturn arr;\n\t}\n};\n//两个字节数组内容是否相同\nvar BytesEq=function(bytes1,bytes2){\n\tif(!bytes1 || bytes1.length!=bytes2.length) return false;\n\tif(bytes1.length==1) return bytes1[0]==bytes2[0];\n\tfor(var i=0;i<bytes1.length;i++){\n\t\tif(bytes1[i]!=bytes2[i]) return false;\n\t}\n\treturn true;\n};\n//字节数组BE转成int数字\nvar BytesInt=function(bytes){\n\tvar s=\"\";//0-8字节，js位运算只支持4字节\n\tfor(var i=0;i<bytes.length;i++){var n=bytes[i];s+=(n<16?\"0\":\"\")+n.toString(16)};\n\treturn parseInt(s,16)||0;\n};\n//读取一个可变长数值字节数组\nvar readMatroskaVInt=function(arr,pos,trim){\n\tvar i=pos[0];\n\tif(i>=arr.length)return;\n\tvar b0=arr[i],b2=(\"0000000\"+b0.toString(2)).substr(-8);\n\tvar m=/^(0*1)(\\d*)$/.exec(b2);\n\tif(!m)return;\n\tvar len=m[1].length, val=[];\n\tif(i+len>arr.length)return;\n\tfor(var i2=0;i2<len;i2++){ val[i2]=arr[i]; i++; }\n\tif(trim) val[0]=parseInt(m[2]||'0',2);\n\tpos[0]=i;\n\treturn val;\n};\n//读取一个自带长度的内容字节数组\nvar readMatroskaBlock=function(arr,pos){\n\tvar lenVal=readMatroskaVInt(arr,pos,1);\n\tif(!lenVal)return;\n\tvar len=BytesInt(lenVal);\n\tvar i=pos[0], val=[];\n\tif(len<0x7FFFFFFF){ //超大值代表没有长度\n\t\tif(i+len>arr.length)return;\n\t\tfor(var i2=0;i2<len;i2++){ val[i2]=arr[i]; i++; }\n\t}\n\tpos[0]=i;\n\treturn val;\n};\n//=====End WebM读取=====\n\n\n//=====i18n 简版国际化多语言支持=====\nvar i18n=Recorder.i18n={\n\tlang: \"zh-CN\" //默认中文\n\t,alias:{\"zh-CN\":\"zh\",\"en-US\":\"en\"} //别名配置，映射到一个语言实例\n\t,locales:{} //语言实例：zh:{key:\"text\"}\n\t,data:{} //各种数据，desc$xx：语言描述，rtl$xx：文本方向是否从右到左 rtl$zh:false rtl$ar:true\n\t//添加语言文本内容，set={lang:\"\",overwrite:true}，texts=[\"key:text{1}\",...]\n\t,put:function(set,texts){\n\t\tvar tag=RecTxt+\".i18n.put: \";\n\t\tvar overwrite=set.overwrite; overwrite=overwrite==null||overwrite;\n\t\tvar lang=set.lang; lang=i18n.alias[lang]||lang;\n\t\tif(!lang)throw new Error(tag+\"set.lang?\");\n\t\tvar locale=i18n.locales[lang];\n\t\tif(!locale){ locale={}; i18n.locales[lang]=locale };\n\t\tvar exp=/^([\\w\\-]+):/,m;\n\t\tfor(var i=0;i<texts.length;i++){\n\t\t\tvar v=texts[i]; m=exp.exec(v);\n\t\t\tif(!m){ CLog(tag+\"'key:'? \"+v,3,set); continue }\n\t\t\tvar key=m[1],v=v.substr(key.length+1);\n\t\t\tif(!overwrite && locale[key]) continue;\n\t\t\tlocale[key]=v;\n\t\t}\n\t}\n\t//获取key对应的文本，如果没有对应文本，将返回en的，en的也没有将返回zh的\n\t,get:function(/*key,args,lang*/){\n\t\treturn i18n.v_G.apply(null,arguments);\n\t}, v_G:function(key,args,lang){ //全局可重写get\n\t\targs=args||[];\n\t\tlang=lang||i18n.lang; lang=i18n.alias[lang]||lang;\n\t\tvar locale=i18n.locales[lang];\n\t\tvar val=locale&&locale[key]||\"\";\n\t\tif(!val&&lang!=\"zh\"){\n\t\t\tif(lang==\"en\")return i18n.v_G(key,args,\"zh\");\n\t\t\treturn i18n.v_G(key,args,\"en\");\n\t\t}\n\t\ti18n.lastLang=lang;\n\t\tif(val==\"=Empty\")return \"\";\n\t\treturn val.replace(/\\{(\\d+)(\\!?)\\}/g,function(v,a,b){\n\t\t\ta=+a||0; v=args[a-1];\n\t\t\tif(a<1 || a>args.length){ v=\"{?}\"; CLog(\"i18n[\"+key+\"] no {\"+a+\"}: \"+val,3) }\n\t\t\treturn b?\"\":v;\n\t\t});\n\t}\n\t/**返回一个国际化文本，返回的文本取决于i18n.lang。\n\t\t调用参数：T(\"key:[lang]:中文{1}\",\"[lang]:英文{1}\",...,0,\"args1\",\"args2\")，除了key:，其他都是可选的，文本如果在语言实例中不存在会push进去，第一个文本无lang时默认zh，第二个无lang时默认en，文本中用{1-n}来插入args\n\t\t第一个args前面这个参数必须是0；也可以不提供args，这个参数填args的数量，此时不返回文本，只返回key，再用i18n.get提供参数获取文本\n\t\t本函数调用，第一个文本需中文，调用尽量简单，不要换行，方便后续自动提取翻译列表\n\t\targs如果旧的参数位置发生了变更，应当使用新的key，让旧的翻译失效，增加args无需更换key\n\t\tkey的生成使用随机字符串，不同源码里面可以搞个不同前缀:\n\t\t\ts=\"\";L=4; for(var i=0,n;i<L;i++){ n=~~(Math.random()*62);s+=n<10?n:String.fromCharCode(n<36?55+n:61+n); }; s\n\t**/\n\t,$T:function(){\n\t\treturn i18n.v_T.apply(null,arguments);\n\t} ,v_T:function(){ //全局可重写$T\n\t\tvar a=arguments,key=\"\",args=[],isArgs=0,tag=RecTxt+\".i18n.$T:\";\n\t\tvar exp=/^([\\w\\-]*):/,m;\n\t\tfor(var i=0;i<a.length;i++){\n\t\t\tvar v=a[i];\n\t\t\tif(i==0){\n\t\t\t\tm=exp.exec(v); key=m&&m[1];\n\t\t\t\tif(!key)throw new Error(tag+\"0 'key:'?\");\n\t\t\t\tv=v.substr(key.length+1);\n\t\t\t}\n\t\t\tif(isArgs===-1) args.push(v);\n\t\t\telse if(isArgs) throw new Error(tag+\" bad args\");\n\t\t\telse if(v===0) isArgs=-1;\n\t\t\telse if(IsNum(v)){\n\t\t\t\tif(v<1) throw new Error(tag+\" bad args\");\n\t\t\t\tisArgs=v;\n\t\t\t}else{\n\t\t\t\tvar lang=i==1?\"en\":i?\"\":\"zh\";\n\t\t\t\tm=exp.exec(v); if(m){ lang=m[1]||lang; v=v.substr(m[1].length+1); }\n\t\t\t\tif(!m || !lang)throw new Error(tag+i+\" 'lang:'?\");\n\t\t\t\ti18n.put({lang:lang,overwrite:false},[key+\":\"+v]);\n\t\t\t}\n\t\t}\n\t\tif(!key)return \"\";\n\t\tif(isArgs>0)return key;\n\t\treturn i18n.v_G(key,args);\n\t}\n};\nvar $T=i18n.$T; $T.G=i18n.get;\n//预定义文本\n$T(\"NonBrowser-1::非浏览器环境，不支持{1}\",1);\n$T(\"IllegalArgs-1::参数错误：{1}\",1);\n$T(\"NeedImport-2::调用{1}需要先导入{2}\",2);\n$T(\"NotSupport-1::不支持：{1}\",1);\n//=====End i18n=====\n\n\n\n//流量统计用1像素图片地址，设置为空将不参与统计\nRecorder.TrafficImgUrl=\"//ia.51.la/go1?id=20469973&pvFlag=1\";\nvar Traffic=Recorder.Traffic=function(report){\n\tif(!isBrowser)return;\n\treport=report?\"/\"+RecTxt+\"/Report/\"+report:\"\";\n\tvar imgUrl=Recorder.TrafficImgUrl;\n\tif(imgUrl){\n\t\tvar data=Recorder.Traffic;\n\t\tvar m=/^(https?:..[^\\/#]*\\/?)[^#]*/i.exec(location.href)||[];\n\t\tvar host=(m[1]||\"http://file/\");\n\t\tvar idf=(m[0]||host)+report;\n\t\t\n\t\tif(imgUrl.indexOf(\"//\")==0){\n\t\t\t//给url加上http前缀，如果是file协议下，不加前缀没法用\n\t\t\tif(/^https:/i.test(idf)){\n\t\t\t\timgUrl=\"https:\"+imgUrl;\n\t\t\t}else{\n\t\t\t\timgUrl=\"http:\"+imgUrl;\n\t\t\t};\n\t\t};\n\t\tif(report){\n\t\t\timgUrl=imgUrl+\"&cu=\"+encodeURIComponent(host+report);\n\t\t};\n\t\t\n\t\tif(!data[idf]){\n\t\t\tdata[idf]=1;\n\t\t\t\n\t\t\tvar img=new Image();\n\t\t\timg.src=imgUrl;\n\t\t\tCLog(\"Traffic Analysis Image: \"+(report||RecTxt+\".TrafficImgUrl=\"+Recorder.TrafficImgUrl));\n\t\t};\n\t};\n};\n\n\n\nif(WRec2){\n\tCLog($T(\"8HO5::覆盖导入{1}\",0,RecTxt),1);\n\tWRec2.Destroy();\n};\nExport[RecTxt]=Recorder;\n\n}));","/*\n录音\nhttps://github.com/xiangyuecn/Recorder\nsrc: recorder-core.js,engine/wav.js\n*/\n!function(e){var t=\"object\"==typeof window&&!!window.document,r=t?window:Object;!function(e,S){\"use strict\";var x=function(){},u=function(e){return\"number\"==typeof e},L=function(e){return JSON.stringify(e)},X=function(e){return new c(e)},M=X.LM=\"2025-01-11 09:28\",k=\"https://github.com/xiangyuecn/Recorder\",T=\"Recorder\",I=\"getUserMedia\",G=\"srcSampleRate\",N=\"sampleRate\",i=\"bitRate\",A=\"catch\",t=e[T];if(t&&t.LM==M)return t.CLog(t.i18n.$T(\"K8zP::重复导入{1}\",0,T),3);X.IsOpen=function(){var e=X.Stream;if(e){var t=W(e),r=t[0];if(r){var n=r.readyState;return\"live\"==n||n==r.LIVE}}return!1},X.BufferSize=4096,X.Destroy=function(){for(var e in q(T+\" Destroy\"),P(),r)r[e]()};var r={};X.BindDestroy=function(e,t){r[e]=t},X.Support=function(){if(!S)return!1;var e=navigator.mediaDevices||{};return e[I]||(e=navigator)[I]||(e[I]=e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia),!!e[I]&&(X.Scope=e,!!X.GetContext())},X.GetContext=function(e){if(!S)return null;var t=window.AudioContext;if(t||(t=window.webkitAudioContext),!t)return null;var r=X.Ctx,n=0;return r||(r=X.Ctx=new t,n=1,X.NewCtxs=X.NewCtxs||[],X.BindDestroy(\"Ctx\",function(){var e=X.Ctx;e&&e.close&&(a(e),X.Ctx=0);var t=X.NewCtxs;X.NewCtxs=[];for(var r=0;r<t.length;r++)a(t[r])})),e&&r.close&&(n||(r._useC||a(r),r=new t),r._useC=1,X.NewCtxs.push(r)),r},X.CloseNewCtx=function(e){if(e&&e.close){a(e);for(var t=X.NewCtxs||[],r=t.length,n=0;n<t.length;n++)if(t[n]==e){t.splice(n,1);break}q(Y(\"mSxV::剩{1}个GetContext未close\",0,r+\"-1=\"+t.length),t.length?3:0)}};var a=function(e){if(e&&e.close&&!e._isC&&(e._isC=1,\"closed\"!=e.state))try{e.close()}catch(e){q(\"ctx close err\",1,e)}},R=X.ResumeCtx=function(r,n,a,o){var i=0,s=0,c=0,f=0,u=\"EventListener\",l=\"ResumeCtx \",v=function(e,t){s&&p(),i||(i=1,e&&o(e,f),t&&a(f)),t&&(!r._LsSC&&r[\"add\"+u]&&r[\"add\"+u](\"statechange\",h),r._LsSC=1,c=1)},p=function(e){if(!e||!s){s=e?1:0;for(var t=[\"focus\",\"mousedown\",\"mouseup\",\"touchstart\",\"touchend\"],r=0;r<t.length;r++)window[(e?\"add\":\"remove\")+u](t[r],h,!0)}},h=function(){var e=r.state,t=g(e);if(!i&&!n(t?++f:f))return v();t?(c&&q(l+\"sc \"+e,3),p(1),r.resume().then(function(){c&&q(l+\"sc \"+r.state),v(0,1)})[A](function(e){q(l+\"error\",1,e),g(r.state)||v(e.message||\"error\")})):\"closed\"==e?(c&&!r._isC&&q(l+\"sc \"+e,1),v(\"ctx closed\")):v(0,1)};h()},g=X.CtxSpEnd=function(e){return\"suspended\"==e||\"interrupted\"==e},O=function(e){var t=e.state,r=\"ctx.state=\"+t;return g(t)&&(r+=Y(\"nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）\")),r},D=\"ConnectEnableWebM\";X[D]=!0;var z=\"ConnectEnableWorklet\";X[z]=!1;var E=function(e){var c=e.BufferSize||X.BufferSize,f=e.Stream,i=f._c,u=i[N],l={},t=W(f),r=t[0],n=null,a=\"\";if(r&&r.getSettings){var o=(n=r.getSettings())[N];o&&o!=u&&(a=Y(\"eS8i::Stream的采样率{1}不等于{2}，将进行采样率转换（注意：音质不会变好甚至可能变差），主要在移动端未禁用回声消除时会产生此现象，浏览器有回声消除时可能只会返回16k采样率的音频数据，\",0,o,u))}f._ts=n,q(a+\"Stream TrackSet: \"+L(n),a?3:0);var v,s,p,h=function(e){var t=f._m=i.createMediaStreamSource(f),r=i.destination,n=\"createMediaStreamDestination\";i[n]&&(r=f._d=i[n]()),t.connect(e),e.connect(r)},g=\"\",d=f._call,m=function(e,t){for(var r in d){if(t!=u){l.index=0;var n=(l=X.SampleData([e],t,u,l,{_sum:1})).data,a=l._sum}else{l={};for(var o=e.length,n=new Int16Array(o),a=0,i=0;i<o;i++){var s=Math.max(-1,Math.min(1,e[i]));s=s<0?32768*s:32767*s,n[i]=s,a+=Math.abs(s)}}for(var c in d)d[c](n,a);return}},C=\"ScriptProcessor\",_=\"audioWorklet\",y=T+\" \"+_,w=\"RecProc\",b=\"MediaRecorder\",S=b+\".WebM.PCM\",x=i.createScriptProcessor||i.createJavaScriptNode,M=Y(\"ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。\",0,_),k=function(){s=f.isWorklet=!1,F(f),q(Y(\"7TU0::Connect采用老的{1}，\",0,C)+J.get(Y(X[z]?\"JwCL::但已设置{1}尝试启用{2}\":\"VGjB::可设置{1}尝试启用{2}\",2),[T+\".\"+z+\"=true\",_])+g+M,3);var e=f._p=x.call(i,c,1,1);h(e),e.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);m(t,u)}},I=function(){v=f.isWebM=!1,U(f),s=f.isWorklet=!x||X[z];var t=window.AudioWorkletNode;if(s&&i[_]&&t){var n=function(){return s&&f._na},a=f._na=function(){\"\"!==p&&(clearTimeout(p),p=setTimeout(function(){p=0,n()&&(q(Y(\"MxX1::{1}未返回任何音频，恢复使用{2}\",0,_,C),3),x&&k())},500))},o=function(){if(n()){var e=f._n=new t(i,w,{processorOptions:{bufferSize:c}});h(e),e.port.onmessage=function(e){p&&(clearTimeout(p),p=\"\"),n()?m(e.data.val,u):s||q(Y(\"XUap::{1}多余回调\",0,_),3)},q(Y(\"yOta::Connect采用{1}，设置{2}可恢复老式{3}\",0,_,T+\".\"+z+\"=false\",C)+g+M,3)}},e=function(){if(n())if(i[w])o();else{var e,t,r=(t=\"class \"+w+\" extends AudioWorkletProcessor{\",t+=\"constructor \"+(e=function(e){return e.toString().replace(/^function|DEL_/g,\"\").replace(/\\$RA/g,y)})(function(e){DEL_super(e);var t=this,r=e.processorOptions.bufferSize;t.bufferSize=r,t.buffer=new Float32Array(2*r),t.pos=0,t.port.onmessage=function(e){e.data.kill&&(t.kill=!0,$C.log(\"$RA kill call\"))},$C.log(\"$RA .ctor call\",e)}),t+=\"process \"+e(function(e,t,r){var n=this,a=n.bufferSize,o=n.buffer,i=n.pos;if((e=(e[0]||[])[0]||[]).length){o.set(e,i);var s=~~((i+=e.length)/a)*a;if(s){this.port.postMessage({val:o.slice(0,s)});var c=o.subarray(s,i);(o=new Float32Array(2*a)).set(c),i=c.length,n.buffer=o}n.pos=i}return!n.kill}),t=(t+='}try{registerProcessor(\"'+w+'\", '+w+')}catch(e){$C.error(\"'+y+' Reg Error\",e)}').replace(/\\$C\\./g,\"console.\"),\"data:text/javascript;base64,\"+btoa(unescape(encodeURIComponent(t))));i[_].addModule(r).then(function(e){n()&&(i[w]=1,o(),p&&a())})[A](function(e){q(_+\".addModule Error\",1,e),n()&&k()})}};R(i,function(){return n()},e,e)}else k()};!function(){var e=window[b],t=\"ondataavailable\",r=\"audio/webm; codecs=pcm\";v=f.isWebM=X[D];var n=e&&t in e.prototype&&e.isTypeSupported(r);if(g=n?\"\":Y(\"VwPd::（此浏览器不支持{1}）\",0,S),!v||!n)return I();var a=function(){return v&&f._ra};f._ra=function(){\"\"!==p&&(clearTimeout(p),p=setTimeout(function(){a()&&(q(Y(\"vHnb::{1}未返回任何音频，降级使用{2}\",0,b,_),3),I())},500))};var o=Object.assign({mimeType:r},X.ConnectWebMOptions),i=f._r=new e(f,o),s=f._rd={};i[t]=function(e){var t=new FileReader;t.onloadend=function(){if(a()){var e=B(new Uint8Array(t.result),s);if(!e)return;if(-1==e)return void I();p&&(clearTimeout(p),p=\"\"),m(e,s.webmSR)}else v||q(Y(\"O9P7::{1}多余回调\",0,b),3)},t.readAsArrayBuffer(e.data)};try{i.start(~~(c/48)),q(Y(\"LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}\",0,S,T+\".\"+D+\"=false\",_,C))}catch(e){q(\"mr start err\",1,e),I()}}()},o=function(e){e._na&&e._na(),e._ra&&e._ra()},F=function(e){e._na=null,e._n&&(e._n.port.postMessage({kill:!0}),e._n.disconnect(),e._n=null)},U=function(e){if(e._ra=null,e._r){try{e._r.stop()}catch(e){q(\"mr stop err\",1,e)}e._r=null}},P=function(e){var t=(e=e||X)==X,r=e.Stream;r&&(r._m&&(r._m.disconnect(),r._m=null),!r._RC&&r._c&&X.CloseNewCtx(r._c),r._RC=null,r._c=null,r._d&&(n(r._d.stream),r._d=null),r._p&&(r._p.disconnect(),r._p.onaudioprocess=r._p=null),F(r),U(r),t&&n(r)),e.Stream=0},n=X.StopS_=function(e){for(var t=W(e),r=0;r<t.length;r++){var n=t[r];n.stop&&n.stop()}e.stop&&e.stop()},W=function(e){var t=0,r=0,n=[];e.getAudioTracks&&(t=e.getAudioTracks(),r=e.getVideoTracks()),t||(t=e.audioTracks,r=e.videoTracks);for(var a=0,o=t?t.length:0;a<o;a++)n.push(t[a]);for(var a=0,o=r?r.length:0;a<o;a++)n.push(r[a]);return n};X.SampleData=function(e,t,r,n,a){var o=\"SampleData\";n||(n={});var i=n.index||0,s=n.offset||0,c=n.raisePrev||0,f=n.filter;if(f&&f.fn&&(f.sr&&f.sr!=t||f.srn&&f.srn!=r)&&(f=null,q(Y(\"d48C::{1}的filter采样率变了，重设滤波\",0,o),3)),!f)if(r<=t){var u=3*t/4<r?0:r/2*3/4;f={fn:u?X.IIRFilter(!0,t,u):0}}else{var u=3*r/4<t?0:t/2*3/4;f={fn:u?X.IIRFilter(!0,r,u):0}}f.sr=t,f.srn=r;var l=f.fn,v=n.frameNext||[];a||(a={});var p=a.frameSize||1;a.frameType&&(p=\"mp3\"==a.frameType?1152:1);var h=a._sum,g=0,d=e.length;d+1<i&&q(Y(\"tlbC::{1}似乎传入了未重置chunk {2}\",0,o,i+\">\"+d),3);for(var m=0,C=i;C<d;C++)m+=e[C].length;var _=t/r;if(1<_)m=Math.max(0,m-Math.floor(s)),m=Math.floor(m/_);else if(_<1){var y=1/_;m=Math.floor(m*y)}m+=v.length;for(var w=new Int16Array(m),b=0,C=0;C<v.length;C++)w[b]=v[C],b++;for(;i<d;i++){var S=e[i],x=S instanceof Float32Array,C=s,M=S.length,k=l&&l.Embed,I=0,L=0,T=0,A=0;if(_<1){for(var R=b+C,O=c,D=0;D<M;D++){var z=S[D];x&&(z=(z=Math.max(-1,Math.min(1,z)))<0?32768*z:32767*z);var E=Math.floor(R);R+=y;for(var F=Math.floor(R),G=(z-O)/(F-E),N=1;E<F;E++,N++){var U=Math.floor(O+N*G);k?(T=U,A=k.b0*T+k.b1*k.x1+k.b0*k.x2-k.a1*k.y1-k.a2*k.y2,k.x2=k.x1,k.x1=T,k.y2=k.y1,k.y1=A,U=A):U=l?l(U):U,32767<U?U=32767:U<-32768&&(U=-32768),h&&(g+=Math.abs(U)),w[E]=U,b++}O=c=z,C+=y}s=C%1}else{for(var D=0,P=0;D<M;D++,P++){if(P<M){var z=S[P];x&&(z=(z=Math.max(-1,Math.min(1,z)))<0?32768*z:32767*z),k?(T=z,A=k.b0*T+k.b1*k.x1+k.b0*k.x2-k.a1*k.y1-k.a2*k.y2,k.x2=k.x1,k.x1=T,k.y2=k.y1,k.y1=A):A=l?l(z):z}if(I=L,L=A,0!=P){var W=Math.floor(C);if(D==W){var B=Math.ceil(C),$=C-W,V=I,j=B<M?L:V,H=V+(j-V)*$;32767<H?H=32767:H<-32768&&(H=-32768),h&&(g+=Math.abs(H)),w[b]=H,b++,C+=_}}else D--}s=Math.max(0,C-M)}}_<1&&b+1==m&&(m--,w=new Int16Array(w.buffer.slice(0,2*m))),b-1!=m&&b!=m&&q(o+\" idx:\"+b+\" != size:\"+m,3),v=null;var J=m%p;if(0<J){var K=2*(m-J);v=new Int16Array(w.buffer.slice(K)),w=new Int16Array(w.buffer.slice(0,K))}var Q={index:i,offset:s,raisePrev:c,filter:f,frameNext:v,sampleRate:r,data:w};return h&&(Q._sum=g),Q},X.IIRFilter=function(e,t,r){var n=2*Math.PI*r/t,a=Math.sin(n),o=Math.cos(n),i=a/2,s=1+i,c=-2*o/s,f=(1-i)/s;if(e)var u=(1-o)/2/s,l=(1-o)/s;else var u=(1+o)/2/s,l=-(1+o)/s;var v=0,p=0,h=0,g=0,d=0,m=function(e){return h=u*e+l*v+u*p-c*g-f*d,p=v,v=e,d=g,g=h};return m.Embed={x1:0,x2:0,y1:0,y2:0,b0:u,b1:l,a1:c,a2:f},m},X.PowerLevel=function(e,t){var r=e/t||0;return r<1251?Math.round(r/1250*10):Math.round(Math.min(100,Math.max(0,100*(1+Math.log(r/1e4)/Math.log(10)))))},X.PowerDBFS=function(e){var t=Math.max(.1,e||0);return t=Math.min(t,32767),t=20*Math.log(t/32767)/Math.log(10),Math.max(-100,Math.round(t))},X.CLog=function(e,t){if(\"object\"==typeof console){var r=new Date,n=(\"0\"+r.getMinutes()).substr(-2)+\":\"+(\"0\"+r.getSeconds()).substr(-2)+\".\"+(\"00\"+r.getMilliseconds()).substr(-3),a=this&&this.envIn&&this.envCheck&&this.id,o=[\"[\"+n+\" \"+T+(a?\":\"+a:\"\")+\"]\"+e],i=arguments,s=X.CLog,c=2,f=s.log||console.log;for(u(t)?f=1==t?s.error||console.error:3==t?s.warn||console.warn:f:c=1;c<i.length;c++)o.push(i[c]);l?f&&f(\"[IsLoser]\"+o[0],1<o.length?o:\"\"):f.apply(console,o)}};var q=function(){X.CLog.apply(this,arguments)},l=!0;try{l=!console.log.apply}catch(e){}var s=0;function c(e){var t=this;t.id=++s,f();var r={type:\"mp3\",onProcess:x};for(var n in e)r[n]=e[n];var a=(t.set=r)[i],o=r[N];(a&&!u(a)||o&&!u(o))&&t.CLog(Y.G(\"IllegalArgs-1\",[Y(\"VtS4::{1}和{2}必须是数值\",0,N,i)]),1,e),r[i]=+a||16,r[N]=+o||16e3,t.state=0,t._S=9,t.Sync={O:9,C:9}}X.Sync={O:9,C:9},X.prototype=c.prototype={CLog:q,_streamStore:function(){return this.set.sourceStream?this:X},_streamGet:function(){return this._streamStore().Stream},_streamCtx:function(){var e=this._streamGet();return e&&e._c},open:function(e,r){var c=this,f=c.set,n=c._streamStore(),a=0;e=e||x;var o=function(e,t){t=!!t,c.CLog(Y(\"5tWi::录音open失败：\")+e+\",isUserNotAllow:\"+t,1),a&&X.CloseNewCtx(a),r&&r(e,t)};c._streamTag=I;var i=function(){c.CLog(\"open ok, id:\"+c.id+\" stream:\"+c._streamTag),e(),c._SO=0},s=n.Sync,u=++s.O,l=s.C;c._O=c._O_=u,c._SO=c._S;if(S){var t=c.envCheck({envName:\"H5\",canProcess:!0});if(t)o(Y(\"A5bm::不能录音：\")+t);else{var v,p=function(){(v=f.runningContext)||(v=a=X.GetContext(!0))};if(f.sourceStream){if(c._streamTag=\"set.sourceStream\",!X.GetContext())return void o(Y(\"1iU7::不支持此浏览器从流中获取录音\"));p(),P(n);var h=c.Stream=f.sourceStream;h._c=v,h._RC=f.runningContext,h._call={};try{E(n)}catch(e){return P(n),void o(Y(\"BTW2::从流中打开录音失败：\")+e.message)}i()}else{var g=function(e,t){try{window.top.a}catch(e){return void o(Y(\"Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})\",0,'allow=\"camera;microphone\"'))}d(1,e)&&(/Found/i.test(e)?o(t+Y(\"jBa9::，无可用麦克风\")):o(t))},d=function(e,t){if(/Permission|Allow/i.test(t))e&&o(Y(\"gyO5::用户拒绝了录音权限\"),!0);else{if(!1!==window.isSecureContext)return 1;e&&o(Y(\"oWNo::浏览器禁止不安全页面录音，可开启https解决\"))}};if(X.IsOpen())i();else if(X.Support()){p();var m,C,_=function(t){setTimeout(function(){t._call={};var e=X.Stream;e&&(P(),t._call=e._call),(X.Stream=t)._c=v,t._RC=f.runningContext,function(){if(l!=s.C||!c._O){var e=Y(\"dFm8::open被取消\");return u==s.O?c.close():e=Y(\"VtJO::open被中断\"),o(e),!0}}()||(X.IsOpen()?(e&&c.CLog(Y(\"upb8::发现同时多次调用open\"),1),E(n),i()):o(Y(\"Q1GA::录音功能无效：无音频流\")))},100)},y=function(e){var t=e.name||e.message||e.code+\":\"+e,r=\"\";1==w&&d(0,t)&&(r=Y(\"KxE2::，将尝试禁用回声消除后重试\"));var n=Y(\"xEQR::请求录音权限错误\"),a=Y(\"bDOG::无法录音：\");c.CLog(n+r+\"|\"+e,r||C?3:1,e),r?(m=t,C=e,b(1)):C?(c.CLog(n+\"|\"+C,1,C),g(m,a+C)):g(t,a+e)},w=0,b=function(e){w++;var t=\"audioTrackSet\",r=\"autoGainControl\",n=\"echoCancellation\",a=\"noiseSuppression\",o=JSON.parse(L(f[t]||!0));c.CLog(\"open... \"+w+\" \"+t+\":\"+L(o)),e&&(\"object\"!=typeof o&&(o={}),o[r]=!1,o[n]=!1,o[a]=!1),o[N]&&c.CLog(Y(\"IjL3::注意：已配置{1}参数，可能会出现浏览器不能正确选用麦克风、移动端无法启用回声消除等现象\",0,t+\".\"+N),3);var i={audio:o,video:f.videoTrackSet||!1};try{var s=X.Scope[I](i,_,y)}catch(e){c.CLog(I,3,e),i={audio:!0,video:!1},s=X.Scope[I](i,_,y)}c.CLog(I+\"(\"+L(i)+\") \"+O(v)+Y(\"RiWe::，未配置 {1} 时浏览器可能会自动启用回声消除，移动端未禁用回声消除时可能会降低系统播放音量（关闭录音后可恢复）和仅提供16k采样率的音频流（不需要回声消除时可明确配置成禁用来获得48k高音质的流），请参阅文档中{2}配置\",0,\"audioTrackSet:{echoCancellation,noiseSuppression,autoGainControl}\",t)+\"(\"+k+\") LM:\"+M+\" UA:\"+navigator.userAgent),s&&s.then&&s.then(_)[A](y)};b()}else g(\"\",Y(\"COxc::此浏览器不支持录音\"))}}}else o(Y.G(\"NonBrowser-1\",[\"open\"])+Y(\"EMJq::，可尝试使用RecordApp解决方案\")+\"(\"+k+\"/tree/master/app-support-sample)\")},close:function(e){e=e||x;var t=this,r=t._streamStore();t._stop();var n=\" stream:\"+t._streamTag,a=r.Sync;if(t._O=0,t._O_!=a.O)return t.CLog(Y(\"hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）\")+n,3),void e();a.C++,P(r),t.CLog(\"close,\"+n),e()},mock:function(e,t){var r=this;return r._stop(),r.isMock=1,r.mockEnvInfo=null,r.buffers=[e],r.recSize=e.length,r._setSrcSR(t),r._streamTag=\"mock\",r},_setSrcSR:function(e){var t=this.set,r=t[N];e<r?t[N]=e:r=0,this[G]=e,this.CLog(G+\": \"+e+\" set.\"+N+\": \"+t[N]+(r?\" \"+Y(\"UHvm::忽略\")+\": \"+r:\"\"),r?3:0)},envCheck:function(e){var t,r=this.set,n=\"CPU_BE\";if(t||X[n]||\"function\"!=typeof Int8Array||new Int8Array(new Int32Array([1]).buffer)[0]||(f(n),t=Y(\"Essp::不支持{1}架构\",0,n)),!t){var a=r.type,o=this[a+\"_envCheck\"];r.takeoffEncodeChunk&&(o?e.canProcess||(t=Y(\"7uMV::{1}环境不支持实时处理\",0,e.envName)):t=Y(\"2XBl::{1}类型不支持设置takeoffEncodeChunk\",0,a)+(this[a]?\"\":Y(\"LG7e::(未加载编码器)\"))),!t&&o&&(t=this[a+\"_envCheck\"](e,r))}return t||\"\"},envStart:function(e,t){var r=this,n=r.set;if(r.isMock=e?1:0,r.mockEnvInfo=e,r.buffers=[],r.recSize=0,e&&(r._streamTag=\"env$\"+e.envName),r.state=1,r.envInLast=0,r.envInFirst=0,r.envInFix=0,r.envInFixTs=[],r._setSrcSR(t),r.engineCtx=0,r[n.type+\"_start\"]){var a=r.engineCtx=r[n.type+\"_start\"](n);a&&(a.pcmDatas=[],a.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(e,t){var a=this,o=a.set,i=a.engineCtx;if(1==a.state){var r=a[G],n=e.length,s=X.PowerLevel(t,n),c=a.buffers,f=c.length;c.push(e);var u=c,l=f,v=Date.now(),p=Math.round(n/r*1e3);a.envInLast=v,1==a.buffers.length&&(a.envInFirst=v-p);var h=a.envInFixTs;h.splice(0,0,{t:v,d:p});for(var g=v,d=0,m=0;m<h.length;m++){var C=h[m];if(3e3<v-C.t){h.length=m;break}g=C.t,d+=C.d}var _=h[1],y=v-g,w=y-d;if(y/3<w&&(_&&1e3<y||6<=h.length)){var b=v-_.t-p;if(p/5<b){var S=!o.disableEnvInFix;if(a.CLog(\"[\"+v+\"]\"+J.get(Y(S?\"4Kfd::补偿{1}ms\":\"bM5i::未补偿{1}ms\",1),[b]),3),a.envInFix+=b,S){var x=new Int16Array(b*r/1e3);n+=x.length,c.push(x)}}}var M=a.recSize,k=n,I=M+k;if(a.recSize=I,i){var L=X.SampleData(c,r,o[N],i.chunkInfo);i.chunkInfo=L,M=i.pcmSize,k=L.data.length,I=M+k,i.pcmSize=I,c=i.pcmDatas,f=c.length,c.push(L.data),r=L[N]}var T=Math.round(I/r*1e3),A=c.length,R=u.length,O=function(){for(var e=D?0:-k,t=null==c[0],r=f;r<A;r++){var n=c[r];null==n?t=1:(e+=n.length,i&&n.length&&a[o.type+\"_encode\"](i,n))}if(t&&i){var r=l;for(u[0]&&(r=0);r<R;r++)u[r]=null}t&&(e=D?k:0,c[0]=null),i?i.pcmSize+=e:a.recSize+=e},D=0,z=\"rec.set.onProcess\";try{D=!0===(D=o.onProcess(c,s,T,r,f,O))}catch(e){console.error(z+Y(\"gFUF::回调出错是不允许的，需保证不会抛异常\"),e)}var E=Date.now()-v;if(10<E&&1e3<a.envInFirst-v&&a.CLog(z+Y(\"2ghS::低性能，耗时{1}ms\",0,E),3),D){for(var F=0,m=f;m<A;m++)null==c[m]?F=1:c[m]=new Int16Array(0);F?a.CLog(Y(\"ufqH::未进入异步前不能清除buffers\"),3):i?i.pcmSize-=k:a.recSize-=k}else O()}else a.state||a.CLog(\"envIn at state=0\",3)},start:function(){var t=this,e=1;if(t.set.sourceStream?t.Stream||(e=0):X.IsOpen()||(e=0),e){var r=t._streamCtx();if(t.CLog(Y(\"kLDN::start 开始录音，\")+O(r)+\" stream:\"+t._streamTag),t._stop(),t.envStart(null,r[N]),t.state=3,t._SO&&t._SO+1!=t._S)t.CLog(Y(\"Bp2y::start被中断\"),3);else{t._SO=0;var n=function(){3==t.state&&(t.state=1,t.resume())},a=\"AudioContext resume: \",o=t._streamGet();o._call[t.id]=function(){t.CLog(a+r.state+\"|stream ok\"),n()},R(r,function(e){return e&&t.CLog(a+\"wait...\"),3==t.state},function(e){e&&t.CLog(a+r.state),n()},function(e){t.CLog(a+r.state+Y(\"upkE::，可能无法录音：\")+e,1),n()})}}else t.CLog(Y(\"6WmN::start失败：未open\"),1)},pause:function(){var e=this,t=e._streamGet();e.state&&(e.state=2,e.CLog(\"pause\"),t&&delete t._call[e.id])},resume:function(){var r=this,t=r._streamGet(),n=\"resume(wait ctx)\";if(3==r.state)r.CLog(n);else if(r.state){r.state=1,r.CLog(\"resume\"),r.envResume(),t&&(t._call[r.id]=function(e,t){1==r.state&&r.envIn(e,t)},o(t));var a=r._streamCtx();a&&R(a,function(e){return e&&r.CLog(n+\"...\"),1==r.state},function(e){e&&r.CLog(n+a.state),o(t)},function(e){r.CLog(n+a.state+\"[err]\"+e,1)})}},_stop:function(e){var t=this,r=t.set;t.isMock||t._S++,t.state&&(t.pause(),t.state=0),!e&&t[r.type+\"_stop\"]&&(t[r.type+\"_stop\"](t.engineCtx),t.engineCtx=0)},stop:function(l,t,e){var v,p=this,h=p.set,r=p.envInLast-p.envInFirst,n=r&&p.buffers.length;p.CLog(Y(\"Xq4s::stop 和start时差:\")+(r?r+\"ms \"+Y(\"3CQP::补偿:\")+p.envInFix+\"ms envIn:\"+n+\" fps:\"+(n/r*1e3).toFixed(1):\"-\")+\" stream:\"+p._streamTag+\" (\"+k+\") LM:\"+M);var g=function(){p._stop(),e&&p.close()},d=function(e){p.CLog(Y(\"u8JG::结束录音失败：\")+e,1),t&&t(e),g()},a=function(e,t,r){var n=\"arraybuffer\",a=\"dataType\",o=\"DefaultDataType\",i=p[a]||X[o]||\"blob\",s=a+\"=\"+i,c=e instanceof ArrayBuffer,f=0,u=c?e.byteLength:e.size;if(i==n?c||(f=1):\"blob\"==i?\"function\"!=typeof Blob?f=Y.G(\"NonBrowser-1\",[s])+Y(\"1skY::，请设置{1}\",0,T+\".\"+o+'=\"'+n+'\"'):(c&&(e=new Blob([e],{type:t})),e instanceof Blob||(f=1),t=e.type||t):f=Y.G(\"NotSupport-1\",[s]),p.CLog(Y(\"Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b\",0,Date.now()-v,r,u)+\" \"+s+\",\"+t),f)d(1!=f?f:Y(\"Vkbd::{1}编码器返回的不是{2}\",0,h.type,i)+\", \"+s);else{if(h.takeoffEncodeChunk)p.CLog(Y(\"QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据\"),3);else if(u<Math.max(50,r/5))return void d(Y(\"Sz2H::生成的{1}无效\",0,h.type));l&&l(e,r,t),g()}};if(!p.isMock){var o=3==p.state;if(!p.state||o)return void d(Y(\"wf9t::未开始录音\")+(o?Y(\"Dl2c::，开始录音前无用户交互导致AudioContext未运行\"):\"\"))}p._stop(!0);var i=p.recSize;if(i)if(p[h.type]){if(p.isMock){var s=p.envCheck(p.mockEnvInfo||{envName:\"mock\",canProcess:!1});if(s)return void d(Y(\"AxOH::录音错误：\")+s)}var c=p.engineCtx;if(p[h.type+\"_complete\"]&&c){var f=Math.round(c.pcmSize/h[N]*1e3);return v=Date.now(),void p[h.type+\"_complete\"](c,function(e,t){a(e,t,f)},d)}if(v=Date.now(),p.buffers[0]){var u=X.SampleData(p.buffers,p[G],h[N]);h[N]=u[N];var m=u.data,f=Math.round(m.length/h[N]*1e3);p.CLog(Y(\"CxeT::采样:{1} 花:{2}ms\",0,i+\"->\"+m.length,Date.now()-v)),setTimeout(function(){v=Date.now(),p[h.type](m,function(e,t){a(e,t,f)},function(e){d(e)})})}else d(Y(\"xkKd::音频buffers被释放\"))}else d(Y(\"xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载\",0,h.type,T));else d(Y(\"Ltz3::未采集到录音\"))}};var B=function(e,t){t.pos||(t.pos=[0],t.tracks={},t.bytes=[]);var r=t.tracks,n=[t.pos[0]],a=function(){t.pos[0]=n[0]},o=t.bytes.length,i=new Uint8Array(o+e.length);if(i.set(t.bytes),i.set(e,o),t.bytes=i,!t._ht){if(j(i,n),H(i,n),!$(j(i,n),[24,83,128,103]))return;for(j(i,n);n[0]<i.length;){var s=j(i,n),c=H(i,n),f=[0],u=0;if(!c)return;if($(s,[22,84,174,107])){for(;f[0]<c.length;){var l=j(c,f),v=H(c,f),p=[0],h={channels:0,sampleRate:0};if($(l,[174]))for(;p[0]<v.length;){var g=j(v,p),d=H(v,p),m=[0];if($(g,[215])){var C=V(d);h.number=C,r[C]=h}else if($(g,[131])){var C=V(d);1==C?h.type=\"video\":2==C?(h.type=\"audio\",u||(t.track0=h),h.idx=u++):h.type=\"Type-\"+C}else if($(g,[134])){for(var _=\"\",y=0;y<d.length;y++)_+=String.fromCharCode(d[y]);h.codec=_}else if($(g,[225]))for(;m[0]<d.length;){var w=j(d,m),b=H(d,m);if($(w,[181])){var C=0,S=new Uint8Array(b.reverse()).buffer;4==b.length?C=new Float32Array(S)[0]:8==b.length?C=new Float64Array(S)[0]:q(\"WebM Track !Float\",1,b),h[N]=Math.round(C)}else $(w,[98,100])?h.bitDepth=V(b):$(w,[159])&&(h.channels=V(b))}}}t._ht=1,q(\"WebM Tracks\",r),a();break}}}var x=t.track0;if(x){var M=x[N];if(t.webmSR=M,16==x.bitDepth&&/FLOAT/i.test(x.codec)&&(x.bitDepth=32,q(\"WebM 16->32 bit\",3)),M<8e3||32!=x.bitDepth||x.channels<1||!/(\\b|_)PCM\\b/i.test(x.codec))return t.bytes=[],t.bad||q(\"WebM Track Unexpected\",3,t),-(t.bad=1);for(var k=[],I=0;n[0]<i.length;){var l=j(i,n),v=H(i,n);if(!v)break;if($(l,[163])){var L=15&v[0],h=r[L];if(!h)return q(\"WebM !Track\"+L,1,r),-1;if(0===h.idx){for(var T=new Uint8Array(v.length-4),y=4;y<v.length;y++)T[y-4]=v[y];k.push(T),I+=T.length}}a()}if(I){var A=new Uint8Array(i.length-t.pos[0]);A.set(i.subarray(t.pos[0])),t.bytes=A,t.pos[0]=0;for(var T=new Uint8Array(I),y=0,R=0;y<k.length;y++)T.set(k[y],R),R+=k[y].length;var S=new Float32Array(T.buffer);if(1<x.channels){for(var O=[],y=0;y<S.length;)O.push(S[y]),y+=x.channels;S=new Float32Array(O)}return S}}},$=function(e,t){if(!e||e.length!=t.length)return!1;if(1==e.length)return e[0]==t[0];for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0},V=function(e){for(var t=\"\",r=0;r<e.length;r++){var n=e[r];t+=(n<16?\"0\":\"\")+n.toString(16)}return parseInt(t,16)||0},j=function(e,t,r){var n=t[0];if(!(n>=e.length)){var a=e[n],o=(\"0000000\"+a.toString(2)).substr(-8),i=/^(0*1)(\\d*)$/.exec(o);if(i){var s=i[1].length,c=[];if(!(n+s>e.length)){for(var f=0;f<s;f++)c[f]=e[n],n++;return r&&(c[0]=parseInt(i[2]||\"0\",2)),t[0]=n,c}}}},H=function(e,t){var r=j(e,t,1);if(r){var n=V(r),a=t[0],o=[];if(n<2147483647){if(a+n>e.length)return;for(var i=0;i<n;i++)o[i]=e[a],a++}return t[0]=a,o}},J=X.i18n={lang:\"zh-CN\",alias:{\"zh-CN\":\"zh\",\"en-US\":\"en\"},locales:{},data:{},put:function(e,t){var r=T+\".i18n.put: \",n=e.overwrite;n=null==n||n;var a=e.lang;if(!(a=J.alias[a]||a))throw new Error(r+\"set.lang?\");var o=J.locales[a];o||(o={},J.locales[a]=o);for(var i,s=/^([\\w\\-]+):/,c=0;c<t.length;c++){var f=t[c];if(i=s.exec(f)){var u=i[1],f=f.substr(u.length+1);!n&&o[u]||(o[u]=f)}else q(r+\"'key:'? \"+f,3,e)}},get:function(){return J.v_G.apply(null,arguments)},v_G:function(n,a,e){a=a||[],e=e||J.lang,e=J.alias[e]||e;var t=J.locales[e],o=t&&t[n]||\"\";return o||\"zh\"==e?(J.lastLang=e,\"=Empty\"==o?\"\":o.replace(/\\{(\\d+)(\\!?)\\}/g,function(e,t,r){return e=a[(t=+t||0)-1],(t<1||t>a.length)&&(e=\"{?}\",q(\"i18n[\"+n+\"] no {\"+t+\"}: \"+o,3)),r?\"\":e})):\"en\"==e?J.v_G(n,a,\"zh\"):J.v_G(n,a,\"en\")},$T:function(){return J.v_T.apply(null,arguments)},v_T:function(){for(var e,t=arguments,r=\"\",n=[],a=0,o=T+\".i18n.$T:\",i=/^([\\w\\-]*):/,s=0;s<t.length;s++){var c=t[s];if(0==s){if(e=i.exec(c),!(r=e&&e[1]))throw new Error(o+\"0 'key:'?\");c=c.substr(r.length+1)}if(-1===a)n.push(c);else{if(a)throw new Error(o+\" bad args\");if(0===c)a=-1;else if(u(c)){if(c<1)throw new Error(o+\" bad args\");a=c}else{var f=1==s?\"en\":s?\"\":\"zh\";if((e=i.exec(c))&&(f=e[1]||f,c=c.substr(e[1].length+1)),!e||!f)throw new Error(o+s+\" 'lang:'?\");J.put({lang:f,overwrite:!1},[r+\":\"+c])}}}return r?0<a?r:J.v_G(r,n):\"\"}},Y=J.$T;Y.G=J.get,Y(\"NonBrowser-1::非浏览器环境，不支持{1}\",1),Y(\"IllegalArgs-1::参数错误：{1}\",1),Y(\"NeedImport-2::调用{1}需要先导入{2}\",2),Y(\"NotSupport-1::不支持：{1}\",1),X.TrafficImgUrl=\"//ia.51.la/go1?id=20469973&pvFlag=1\";var f=X.Traffic=function(e){if(S){e=e?\"/\"+T+\"/Report/\"+e:\"\";var t=X.TrafficImgUrl;if(t){var r=X.Traffic,n=/^(https?:..[^\\/#]*\\/?)[^#]*/i.exec(location.href)||[],a=n[1]||\"http://file/\",o=(n[0]||a)+e;if(0==t.indexOf(\"//\")&&(t=/^https:/i.test(o)?\"https:\"+t:\"http:\"+t),e&&(t=t+\"&cu=\"+encodeURIComponent(a+e)),!r[o]){r[o]=1;var i=new Image;i.src=t,q(\"Traffic Analysis Image: \"+(e||T+\".TrafficImgUrl=\"+X.TrafficImgUrl))}}}};t&&(q(Y(\"8HO5::覆盖导入{1}\",0,T),1),t.Destroy());e[T]=X}(r,t),\"function\"==typeof define&&define.amd&&define(function(){return r.Recorder}),\"object\"==typeof module&&module.exports&&(module.exports=r.Recorder)}(),function(e){var t=\"object\"==typeof window&&!!window.document,r=(t?window:Object).Recorder,n=r.i18n;!function(p,e,h,t){\"use strict\";p.prototype.enc_wav={stable:!0,fast:!0,getTestMsg:function(){return h(\"gPSE::支持位数8位、16位（填在比特率里面），采样率取值无限制；此编码器仅在pcm数据前加了一个44字节的wav头，编码出来的16位wav文件去掉开头的44字节即可得到pcm（注：其他wav编码器可能不是44字节）\")}};p.prototype.wav=function(e,t,r){var n=this.set;!function(e){var t=e.bitRate,r=8==t?8:16;t!=r&&p.CLog(h(\"wyw9::WAV Info: 不支持{1}位，已更新成{2}位\",0,t,r),3);e.bitRate=r}(n);var a=e.length,o=n.sampleRate,i=n.bitRate,s=a*(i/8),c=p.wav_header(1,1,o,i,s),f=c.length,u=new Uint8Array(f+s);if(u.set(c),8==i)for(var l=0;l<a;l++){var v=128+(e[l]>>8);u[f++]=v}else(u=new Int16Array(u.buffer)).set(e,f/2);t(u.buffer,\"audio/wav\")},p.wav_header=function(e,t,r,n,a){var o=1==e?0:2,i=new ArrayBuffer(44+o),s=new DataView(i),c=0,f=function(e){for(var t=0;t<e.length;t++,c++)s.setUint8(c,e.charCodeAt(t))},u=function(e){s.setUint16(c,e,!0),c+=2},l=function(e){s.setUint32(c,e,!0),c+=4};return f(\"RIFF\"),l(36+o+a),f(\"WAVE\"),f(\"fmt \"),l(16+o),u(e),u(t),l(r),l(r*(t*n/8)),u(t*n/8),u(n),1!=e&&u(0),f(\"data\"),l(a),new Uint8Array(i)}}(r,0,n.$T)}();","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","import axios from 'axios';\nimport Recorder from 'recorder-core';\nimport 'recorder-core/recorder.wav.min';\n\nconst record = async options => {\n  const {\n    url,\n    sampleRate,\n    bitRate,\n    options: requestOptions,\n    onComplete\n  } = Object.assign(\n    {\n      sampleRate: 16000,\n      bitRate: 16\n    },\n    {},\n    options\n  );\n  const rec = Recorder({\n    type: 'wav',\n    sampleRate,\n    bitRate\n  });\n  return {\n    start: async () => {\n      await new Promise((resolve, reject) => {\n        rec.open(resolve, reject);\n      });\n      rec.start();\n      return { record: rec };\n    },\n    stop: async () => {\n      const file = await new Promise((resolve, reject) => {\n        rec.stop(blob => {\n          resolve(new File([blob], 'audio.wav', { type: 'audio/wav' }));\n        }, reject);\n      });\n      rec.close();\n      onComplete && onComplete({ file });\n      return url && (await axios.postForm(url, { file }, requestOptions));\n    }\n  };\n};\n\nexport default record;\n","import axios from 'axios';\nimport { v4 as uuidv4 } from 'uuid';\n\nconst getUUId = () => {\n  return uuidv4().replace(/-/g, '');\n};\n\nconst realtime = async options => {\n  const {\n    url,\n    options: requestOptions,\n    getToken,\n    getGatewayUrl,\n    sampleRate,\n    onError,\n    onChange,\n    onComplete\n  } = Object.assign(\n    {},\n    {\n      getGatewayUrl: ({ token }) => `wss://nls-gateway-cn-shanghai.aliyuncs.com/ws/v1?token=${token}`,\n      onChange: ({ message }) => {\n        console.log(message);\n      },\n      onError: () => {},\n      sampleRate: 16000\n    },\n    options\n  );\n  const taskId = getUUId();\n  let context = null;\n  return {\n    start: async () => {\n      const { token, appKey } = await getToken();\n      const messageId = getUUId();\n      const ws = new WebSocket(getGatewayUrl({ token }));\n      const resultChunks = [];\n      const chunks = [];\n      let message = '';\n      await new Promise(resolve => {\n        ws.addEventListener('open', () => {\n          console.log('socket链接成功');\n          ws.send(\n            JSON.stringify({\n              header: {\n                message_id: messageId,\n                task_id: taskId,\n                namespace: 'SpeechTranscriber',\n                name: 'StartTranscription',\n                appkey: appKey\n              },\n              payload: {\n                format: 'pcm',\n                sample_rate: 16000,\n                max_sentence_silence: 200,\n                enable_intermediate_result: true,\n                enable_punctuation_prediction: true,\n                enable_inverse_text_normalization: true\n              }\n            })\n          );\n        });\n        ws.addEventListener('message', e => {\n          const data = JSON.parse(e.data);\n          if (data.header.name === 'TranscriptionStarted') {\n            resolve();\n          }\n          if (data.header.name === 'TranscriptionResultChanged' || data.header.name === 'SentenceEnd') {\n            Object.assign(resultChunks, { [data.payload.index]: data.payload.result });\n            message = Object.keys(resultChunks)\n              .sort((a, b) => a - b)\n              .map(index => resultChunks[index])\n              .join('');\n            onChange &&\n              onChange({\n                payload: data.payload,\n                chunks: resultChunks,\n                message\n              });\n          }\n        });\n      });\n      const stream = await window.navigator.mediaDevices.getUserMedia({ audio: true }).catch(e => {\n        console.log('获取麦克风权限失败，请刷新后重试');\n        onError('获取麦克风权限失败，请刷新后重试', 'NO_MICROPHONE_PERMISSION', e);\n        throw e;\n      });\n      const recorder = new window.MediaRecorder(stream);\n      recorder.start(1000);\n\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)({\n        sampleRate\n      });\n      const audioInput = audioContext.createMediaStreamSource(stream);\n      const scriptProcessor = audioContext.createScriptProcessor(2048, 1, 1);\n      scriptProcessor.onaudioprocess = function (event) {\n        const inputData = event.inputBuffer.getChannelData(0);\n        const inputData16 = new Int16Array(inputData.length);\n        for (let i = 0; i < inputData.length; ++i) {\n          inputData16[i] = Math.max(-1, Math.min(1, inputData[i])) * 0x7fff; // PCM 16-bit\n        }\n        ws.send(inputData16.buffer);\n      };\n      audioInput.connect(scriptProcessor);\n      scriptProcessor.connect(audioContext.destination);\n      const dataHandler = e => {\n        chunks.push(e.data);\n      };\n      recorder.addEventListener('dataavailable', dataHandler);\n      context = {\n        ws,\n        stream,\n        taskId,\n        messageId,\n        scriptProcessor,\n        audioInput,\n        audioContext,\n        appKey,\n        resultChunks,\n        chunks,\n        message,\n        destroy: () => {\n          ws.send(\n            JSON.stringify({\n              header: {\n                message_id: messageId,\n                task_id: taskId,\n                namespace: 'SpeechTranscriber',\n                name: 'StopTranscription',\n                appkey: appKey\n              }\n            })\n          );\n          recorder.removeEventListener('dataavailable', dataHandler);\n          ws.close();\n          scriptProcessor.disconnect();\n          audioInput.disconnect();\n          audioContext.close();\n          const tracks = (stream.getTracks && stream.getTracks()) || stream.audioTracks || [];\n          tracks.forEach(track => {\n            track.stop && track.stop();\n          });\n          stream.stop && stream.stop();\n        }\n      };\n      return context;\n    },\n    stop: async () => {\n      if (!context) {\n        return;\n      }\n      const { taskId, messageId, chunks, destroy, message } = context;\n      const file = await new Promise((resolve, reject) => {\n        const file = new File(chunks, `${taskId}.wav`, { type: 'audio/wav' });\n        onComplete && onComplete({ file, taskId, messageId, message, chunks });\n        destroy();\n        context = null;\n        resolve(file);\n      });\n      return url && (await axios.postForm(url, { file }, requestOptions));\n    }\n  };\n};\n\nexport default realtime;\n"],"names":["browser","window","document","win","Object","Export","isBrowser","NOOP","IsNum","v","ToJson","JSON","stringify","Recorder","set","initFn","LM","GitUrl","RecTxt","getUserMediaTxt","srcSampleRateTxt","sampleRateTxt","bitRateTxt","CatchTxt","WRec2","CLog","i18n","$T","IsOpen","stream","Stream","track","Tracks_","state","readyState","LIVE","BufferSize","Destroy","k","Disconnect","DestroyList","BindDestroy","key","call","Support","scope","navigator","mediaDevices","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","Scope","GetContext","tryNew","AC","AudioContext","webkitAudioContext","ctx","Ctx","isNew","NewCtxs","close","CloseCtx","arr","i","length","_useC","push","CloseNewCtx","L","splice","_isC","e","ResumeCtx","check","True","False","isEnd","isBind","isLsSC","runC","EL","Tag","end","err","ok","bind","_LsSC","run","add","types","sVal","spEnd","CtxSpEnd","resume","then","message","CtxState","msg","ConnectEnableWebM","ConnectEnableWorklet","Connect","streamStore","bufferSize","_c","ctxSR","srChunk","trackSet","tsMsg","getSettings","trackSR","_ts","isWebM","isWorklet","badInt","mediaConn","node","media","_m","createMediaStreamSource","ctxDest","destination","cmsdTxt","_d","connect","webMTips","calls","_call","onReceive","float32Arr","arrSR","k0","index","pcm","SampleData","_sum","data","sum","size","j","Int16Array","s","Math","max","min","abs","scriptProcessor","audioWorklet","recAudioWorklet","RecProc","MediaRecorderTxt","MRWebMPCM","oldFn","createScriptProcessor","createJavaScriptNode","oldIsBest","oldScript","_Disconn_n","get","process","_p","onaudioprocess","inputBuffer","getChannelData","connWorklet","_Disconn_r","AwNode","AudioWorkletNode","clazzUrl","xf","f","toString","replace","clazz","option","DEL_super","This","this","processorOptions","buffer","Float32Array","pos","port","onmessage","kill","$C","log","input","b","c","len","postMessage","val","slice","more","subarray","btoa","unescape","encodeURIComponent","awNext","_na","nodeAlive","clearTimeout","setTimeout","createNode","_n","ctxOK","url","addModule","MR","onData","webmType","supportMR","prototype","isTypeSupported","mrNext","_ra","mrSet","assign","mimeType","ConnectWebMOptions","mr","_r","webmData","_rd","reader","FileReader","onloadend","f32arr","WebM_Extract","Uint8Array","result","webmSR","readAsArrayBuffer","start","connWebM","ConnAlive","disconnect","stop","isGlobal","_RC","StopS_","tracks","arr1","arr2","getAudioTracks","getVideoTracks","audioTracks","videoTracks","pcmDatas","pcmSampleRate","newSampleRate","prevChunkInfo","Txt","freq","offset","raisePrev","filter","fn","sr","srn","IIRFilter","filterFn","frameNext","frameSize","frameType","useSum","nLen","step","floor","raiseStep","res","idx","o","isF32","il","F","Embed","F1","F2","Fx","Fy","idx1","prev","i0","oVal","n","b0","b1","x1","x2","a1","y1","a2","y2","i2","before","ceil","frameNextSize","u8Pos","obj","sampleRate","useLowPass","ov","PI","sn","sin","cs","cos","alpha","a0","y","x","PowerLevel","pcmAbsSum","pcmLength","power","round","PowerDBFS","maxSample","Pref","console","now","Date","t","getMinutes","substr","getSeconds","getMilliseconds","recID","envIn","envCheck","id","a","arguments","cwe","error","warn","IsLoser","apply","ID","Traffic","type","onProcess","vB","vS","G","_S","Sync","O","C","_streamStore","sourceStream","_streamGet","_streamCtx","m","open","newCtx","failCall","errMsg","isUserNotAllow","_streamTag","_SO","Lock","lockOpen","lockClose","_O","_O_","lockFail","checkMsg","envName","canProcess","getCtx","runningContext","codeFail","code","top","codeErr1","test","isSecureContext","f2_c","f2_e","f1","oldStream","f2","name","tryMsg","callUmCount","msg1","msg2","callUserMedia","retry","atsTxt","t_AGC","t_AEC","t_ANS","atsTxtJs","parse","mSet","audio","video","videoTrackSet","pro","userAgent","_stop","sTag","mock","pcmData","isMock","mockEnvInfo","buffers","recSize","_setSrcSR","setSr","envInfo","tag","Int8Array","Int32Array","hasFn","takeoffEncodeChunk","envStart","envInLast","envInFirst","envInFix","envInFixTs","engineCtx","pcmSize","envResume","bufferSampleRate","powerLevel","bufferFirstIdx","buffersThis","bufferFirstIdxThis","pcmTime","d","tsInStart","tsPcm","tsInPrev","tsIn","addTime","fixOpen","disableEnvInFix","addPcm","sizeOld","addSize","chunkInfo","duration","bufferNextIdx","bufferNextIdxThis","asyncEnd","num","asyncBegin","hasClear","procTxt","slowT","isOpen","pause","tag3","keepEngine","autoClose","t1","envInMS","envInLen","toFixed","blob","mime","tBlob","tABuf","tDT","tDDT","dType","dTag","isAB","ArrayBuffer","dErr","dLen","byteLength","Blob","isCtxWait","chunk","inBytes","bytes","position","endPos","sBL","_ht","readMatroskaVInt","readMatroskaBlock","BytesEq","eid0","bytes0","pos0","audioIdx","eid1","bytes1","pos1","channels","eid2","bytes2","pos2","BytesInt","number","track0","str","String","fromCharCode","codec","eid3","bytes3","reverse","Float64Array","bitDepth","bad","datas","dataLen","trackNo","u8arr","parseInt","trim","b2","exec","lenVal","lang","alias","locales","put","texts","overwrite","Error","locale","exp","v_G","args","lastLang","v_T","isArgs","TrafficImgUrl","report","imgUrl","location","href","host","idf","indexOf","Image","src","factory","define","module","exports","r","S","u","X","M","T","I","N","A","W","q","P","Y","R","l","p","h","g","D","z","E","_","w","J","U","B","H","K","Q","$","V","enc_wav","stable","fast","getTestMsg","wav","bitRate","wav_header","DataView","setUint8","charCodeAt","setUint16","setUint32","randomUUID","crypto","getRandomValues","rnds8","byteToHex","unsafeStringify","undefined","toLowerCase","options","buf","native","rnds","random","rng","RangeError","record","async","requestOptions","onComplete","rec","Promise","resolve","reject","file","File","axios","getUUId","v4","realtime","getToken","getGatewayUrl","onError","onChange","_ref","token","_ref2","taskId","context","appKey","messageId","ws","WebSocket","resultChunks","chunks","addEventListener","send","header","message_id","task_id","namespace","appkey","payload","format","sample_rate","max_sentence_silence","enable_intermediate_result","enable_punctuation_prediction","enable_inverse_text_normalization","keys","sort","map","join","getUserMedia","catch","recorder","MediaRecorder","audioContext","audioInput","event","inputData","inputData16","dataHandler","destroy","removeEventListener","getTracks","forEach"],"sourceRoot":""}